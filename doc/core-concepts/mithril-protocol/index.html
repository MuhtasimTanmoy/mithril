<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-core-concepts/mithril-protocol">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/doc/milestones/rss.xml" title="Mithril RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/milestones/atom.xml" title="Mithril Atom Feed"><title data-rh="true">Mithril Protocol | Mithril</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://input-output-hk.github.io/doc/core-concepts/mithril-protocol"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mithril Protocol | Mithril"><meta data-rh="true" name="description" content="The full details of the Mithril protocol are provided in the published paper. This section is high-level description of"><meta data-rh="true" property="og:description" content="The full details of the Mithril protocol are provided in the published paper. This section is high-level description of"><link data-rh="true" rel="icon" href="/doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://input-output-hk.github.io/doc/core-concepts/mithril-protocol"><link data-rh="true" rel="alternate" href="https://input-output-hk.github.io/doc/core-concepts/mithril-protocol" hreflang="en"><link data-rh="true" rel="alternate" href="https://input-output-hk.github.io/doc/core-concepts/mithril-protocol" hreflang="x-default"><link rel="stylesheet" href="/doc/assets/css/styles.d93979a4.css">
<link rel="preload" href="/doc/assets/js/runtime~main.0d3d5a69.js" as="script">
<link rel="preload" href="/doc/assets/js/main.becf0b14.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc/"><div class="navbar__logo"><img src="/doc/img/logo.png" alt="Mithril Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/doc/img/logo.png" alt="Mithril Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Mithril</b></a><a class="navbar__item navbar__link" href="/doc/intro">Getting Started</a><a class="navbar__item navbar__link navbar__link--active" href="/doc/core-concepts/">Core Concepts</a><a class="navbar__item navbar__link" href="/doc/topologies/">Topologies</a><a class="navbar__item navbar__link" href="/doc/test-lab/">Test Lab</a><a class="navbar__item navbar__link" href="/doc/aggregator-api">Aggregator Server Api Reference</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/doc/milestones">Milestones</a><a href="https://github.com/input-output-hk/mithril/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/core-concepts/">Core concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/doc/core-concepts/mithril-protocol">Mithril Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/core-concepts/cardano-apis">Cardano APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/core-concepts/certificate-details">Mithril Certificate Details</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/core-concepts/spv">Simple Payment Verification</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/doc/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Mithril Protocol</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Mithril Protocol</h1><p>The full details of the Mithril protocol are provided in the published paper. This section is high-level description of
the protocol in layman‚Äôs terms. In a nutshell, Mithril is a signature scheme that generates a certificate that convinces
the verifiers that a portion of the stake of a system has signed a message. However, rather than taking the whole set of
stake holders, Mithril
&quot;randomly selects&quot; a subset of them, and requires a portion of that subset to provide a signature. An analogy would be
that Mithril signers participate in a lottery which defines if they are entitled to sign a particular message. In case
they win this lottery, then they can go ahead and sign the message. Whenever a sufficient number of parties have won the
lottery (and submitted their respective signatures), a certificate can be computed.</p><p>The protocol has 3 different phases:</p><ol><li>Protocol Establishment phase. This phase determines the parameters that will be used by Mithril participants. Also,
during this phase, the set of &quot;allowed signers&quot; is defined.</li><li>Initialisation phase during which Mithril nodes generate and exchange keys,</li><li>Operations phase during which nodes sign and aggregate signatures of messages to produce certificates.</li></ol><p>Note that all 3 phases require the set of parties (P in the paper) to be fixed. During the protocol establishment phase
three important parameters are generated:</p><ul><li><code>m</code>, defines the number of &quot;lotteries&quot; that a single user can participate in to sign a message.</li><li><code>k</code>, defines the required number of single signatures to produce a valid certificate.</li><li><code>phi_f</code> (as denoted in the library) which can be interpreted as the change of a signer to win a lottery.</li></ul><p>Now, let&#x27;s assume that we want to generate a valid signature for message <code>msg</code> using a mithril signature. Then we need
<code>k</code> valid signatures from the subset of signers. To this end, each player is allowed to participate in <code>m</code> &quot;lotteries&quot;
to see if it &quot;wins&quot; the right to sign the message. If none of this lotteries are won by this particular signer, then it
will not be able to submit a signature. If, contrarily, the signer wins one of the lotteries (or more than one), then it
can submit the corresponding signature (or all of the corresponding signatures respectively) to produce the valid
certificate. The chance of winning the lottery is defined by a function over <code>phi_f</code>. The closer <code>phi_f</code> is to one, the
higher the changes of winning a lottery are.</p><p>This means that there exists the possibility that a particular message cannot be certified using Mithril under a given
set of parameters. There could be a scenario where not enough signers have won the allowed lotteries to produce a valid
certificate. In which case the parameters can be adapted.</p><blockquote><p>Question: How is this set defined? How are parties identified by all other parties? Should be some known set of parties identified by their keys?</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="protocol-establishment-phase">Protocol Establishment Phase<a class="hash-link" href="#protocol-establishment-phase" title="Direct link to heading">‚Äã</a></h2><ul><li>Select/fix a prime order group to be used as basis for multi-signature scheme</li><li><em>When using bulletproof</em>: Generate a &quot;random&quot; string, for example by taking some unpredictable data from the net (hash
of latest block, stockmarket quotes) and hash it</li><li>When requested by a party, return the parameters and random string</li></ul><p>This setup phase must be done only once and is valid for as long as the same proof system, e.g the parameters can very
well be statically baked into the various systems producing and consuming Mithril proofs.</p><p>Similarly, during the protocol establishment phase, the parameters <code>k</code>, <code>m</code> and <code>phi_f</code> are defined, as well as the set
of allowed signers.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="initialisation-phase">Initialisation Phase<a class="hash-link" href="#initialisation-phase" title="Direct link to heading">‚Äã</a></h2><p>This phase includes both the actual initialisation phase of each party, and the registration of keys.</p><ul><li>Party retrieves the protocol parameters</li><li>It uses the parameters to generate a new key pair of a verification key and a signing key, plus a Proof-of-possession
Œ∫. The verification key and PoP are broadcast to all other parties for registration, which is expected to last for
some limited period of time. An important difference with the paper is that registration is not centralised in the &quot;
idealised&quot; manner described in the paper. Instead, all signers will register against all other signers. Meaning that
each signer will trace it&#x27;s own registration procedure. Together with other participants&#x27; keys, the stake of each
party is stored.</li><li>Then an aggregate verification key (AVK in the paper) is created from the registration material, in the form of a
Merkle-tree.</li></ul><p>The key dissemination process can also happen on-chain, which makes sense as the parties need to have some guarantees
about the validity of keys and stakes of each other party.</p><p>This phase happens once for each <em>instance</em> of the protocol running.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="operations-phase">Operations Phase<a class="hash-link" href="#operations-phase" title="Direct link to heading">‚Äã</a></h2><p>Operations run in cycles, where each cycle is triggered by a message (eg. a snapshot of the UTxO set) to sign for which
a quorum of <code>k</code> valid signatures must be submitted.</p><ul><li>Each party needs to check for eligibility to sign the message. It may be eligible to sign the same message more than
once. This check is performed for <code>m</code> distinct indices. For every index, the signer evaluates a function
(parametrised with <code>phi_f</code>) that takes its stake as input. If the result of the function is <code>SUCCESS</code>, then the signer
is eligible to sign this message for the given index.</li><li>For every valid signature, it creates a proof (œÄ) containing a signature of the message, verification key, stake and
paths of party in the merkle-tree.</li><li>Then, multiple signatures can be aggregated together to form a certificate (œÑ) by:<ul><li>Verifying signatures from each party:<ul><li>Checking the party is authorised to sign for the given index (using the same procedure as the signing)</li><li>Checking the proof is valid which means:<ul><li>Check the evaluation threshold is correct for party‚Äôs stake given the message, index and signature</li><li>Check the provided path exists in the aggregate keys&#x27; Merkle-tree</li><li>Verify the signature of the message is valid w.r.t to verification key</li></ul></li></ul></li><li>Producing an aggregation key from all verification keys</li><li>Producing an aggregate signature from all signatures Œº</li><li>Producing a proof using the aggregate keys, the message and the vector of individual proofs from each party:<ul><li>In the concatenation proof system all these values are simply packed together to form the proof,</li><li>In the case of <em>bulletproof</em> system, a more compact proof is generated.</li></ul></li></ul></li><li>Each certificate œÑ can be verified to be valid for some message, using the known setup parameters to verify the
certificate‚Äôs proof and then verifying the aggregate signatures and verification keys.</li></ul><p>Note that if the individual signatures are broadcast to all parties, then each party can independently produce the
certificates. In particular, the particular that performs aggregation is not required to have any particular knowledge,
nor it is assumed to be honest. This means that <em>any</em> third party that has access to the individual signatures can
perform the signature aggregation.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/input-output-hk/mithril/tree/main/docs/root/root/core-concepts/mithril-protocol.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doc/core-concepts/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Core concepts</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doc/core-concepts/cardano-apis"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cardano APIs</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#protocol-establishment-phase" class="table-of-contents__link toc-highlight">Protocol Establishment Phase</a></li><li><a href="#initialisation-phase" class="table-of-contents__link toc-highlight">Initialisation Phase</a></li><li><a href="#operations-phase" class="table-of-contents__link toc-highlight">Operations Phase</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://iohk.io/en/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Input Output (Blog)</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 <strong>Input Output</strong> <br> <small>Built with Docusaurus</small></div></div></div></footer></div>
<script src="/doc/assets/js/runtime~main.0d3d5a69.js"></script>
<script src="/doc/assets/js/main.becf0b14.js"></script>
</body>
</html>