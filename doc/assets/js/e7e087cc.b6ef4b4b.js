"use strict";(self.webpackChunkmithril_doc=self.webpackChunkmithril_doc||[]).push([[5038],{3905:(e,a,t)=>{t.d(a,{Zo:()=>l,kt:()=>h});var n=t(7294);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function d(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?d(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function r(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t,n,o={},d=Object.keys(e);for(n=0;n<d.length;n++)t=d[n],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(n=0;n<d.length;n++)t=d[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=n.createContext({}),c=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},l=function(e){var a=c(e.components);return n.createElement(s.Provider,{value:a},e.children)},f="mdxType",p={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},b=n.forwardRef((function(e,a){var t=e.components,o=e.mdxType,d=e.originalType,s=e.parentName,l=r(e,["components","mdxType","originalType","parentName"]),f=c(t),b=o,h=f["".concat(s,".").concat(b)]||f[b]||p[b]||d;return t?n.createElement(h,i(i({ref:a},l),{},{components:t})):n.createElement(h,i({ref:a},l))}));function h(e,a){var t=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var d=t.length,i=new Array(d);i[0]=b;var r={};for(var s in a)hasOwnProperty.call(a,s)&&(r[s]=a[s]);r.originalType=e,r[f]="string"==typeof e?e:o,i[1]=r;for(var c=2;c<d;c++)i[c]=t[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}b.displayName="MDXCreateElement"},7907:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>d,metadata:()=>r,toc:()=>c});var n=t(7462),o=(t(7294),t(3905));const d={sidebar_position:3},i="Run a Private Mithril network",r={unversionedId:"manual/getting-started/run-mithril-devnet",id:"manual/getting-started/run-mithril-devnet",title:"Run a Private Mithril network",description:"In this guide, you will learn how to run a demonstration of a Mithril Network working on top of a private devnet Cardano Network. This network is completely autonomous and setup to produce Mithril snapshots every 1 minute.",source:"@site/root/manual/getting-started/run-mithril-devnet.md",sourceDirName:"manual/getting-started",slug:"/manual/getting-started/run-mithril-devnet",permalink:"/doc/next/manual/getting-started/run-mithril-devnet",draft:!1,editUrl:"https://github.com/input-output-hk/mithril/edit/main/docs/root/manual/getting-started/run-mithril-devnet.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docSideBar",previous:{title:"Run a Mithril Signer node (SPO)",permalink:"/doc/next/manual/getting-started/run-signer-node"},next:{title:"Developer Docs",permalink:"/doc/next/category/developer-docs"}},s={},c=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Download source",id:"download-source",level:2},{value:"Change directory",id:"change-directory",level:2},{value:"Run a Private Mithril/Cardano network locally (<code>devnet</code>)",id:"run-a-private-mithrilcardano-network-locally-devnet",level:2},{value:"Step 1: Launch the devnet",id:"step-1-launch-the-devnet",level:3},{value:"Step 2: Query the devnet",id:"step-2-query-the-devnet",level:3},{value:"Step 3: Observe the devnet",id:"step-3-observe-the-devnet",level:3},{value:"Interact with the Mithril Aggregator by using the Mithril Client",id:"interact-with-the-mithril-aggregator-by-using-the-mithril-client",level:2},{value:"Step 1: Prepare some useful variables",id:"step-1-prepare-some-useful-variables",level:3},{value:"Step 2: Select A Snapshot",id:"step-2-select-a-snapshot",level:3},{value:"Step 3: Show Snapshot Details",id:"step-3-show-snapshot-details",level:3},{value:"Step 4: Download Selected Snapshot",id:"step-4-download-selected-snapshot",level:3},{value:"Step 5: Restore Selected Snapshot",id:"step-5-restore-selected-snapshot",level:3}],l={toc:c},f="wrapper";function p(e){let{components:a,...d}=e;return(0,o.kt)(f,(0,n.Z)({},l,d,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"run-a-private-mithril-network"},"Run a Private Mithril network"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"In this guide, you will learn how to run a demonstration of a ",(0,o.kt)("strong",{parentName:"p"},"Mithril Network")," working on top of a private ",(0,o.kt)("inlineCode",{parentName:"p"},"devnet")," ",(0,o.kt)("strong",{parentName:"p"},"Cardano Network"),". This network is completely autonomous and setup to produce Mithril snapshots every 1 minute.")),(0,o.kt)("p",null,"The network will be launched with the following topology:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"2")," ",(0,o.kt)("strong",{parentName:"li"},"Cardano Nodes")," configured as ",(0,o.kt)("strong",{parentName:"li"},"Stake Pool Operators (SPO)")," with a ",(0,o.kt)("strong",{parentName:"li"},"Mithril Signer")," on top"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"1")," ",(0,o.kt)("strong",{parentName:"li"},"Cardano Node")," configured as ",(0,o.kt)("strong",{parentName:"li"},"BFT node")," with a ",(0,o.kt)("strong",{parentName:"li"},"Mithril Aggregator")," on top")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Devnet Topology",src:t(4861).Z,width:"1010",height:"749"})),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"This demonstration is working only on a Linux machine.")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"More information about this private Cardano/Mithril ",(0,o.kt)("inlineCode",{parentName:"p"},"devnet")," is available ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/mithril/blob/main/mithril-test-lab/mithril-devnet/README.md"},"here"),".")),(0,o.kt)("h1",{id:"video-demonstration"},"Video demonstration"),(0,o.kt)("iframe",{style:{width:"100%",height:"480px"},src:"https://www.youtube.com/embed/qu3GoO1UwYI",title:"Run a Private Mithril network",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"true"}),(0,o.kt)("h2",{id:"pre-requisites"},"Pre-requisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Install a ",(0,o.kt)("a",{parentName:"p",href:"https://www.rust-lang.org/learn/get-started"},"correctly configured")," Rust toolchain (latest stable version).")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Install OpenSSL development libraries, for example on Ubuntu/Debian/Mint run ",(0,o.kt)("inlineCode",{parentName:"p"},"apt install libssl-dev"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Ensure SQLite3 library is installed on your system and its version is at least ",(0,o.kt)("inlineCode",{parentName:"p"},"3.35")," (released Apr. 2021) on Debian/Ubuntu: ",(0,o.kt)("inlineCode",{parentName:"p"},"apt install libsqlite3")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"sqlite3 --version"),"."))),(0,o.kt)("h2",{id:"download-source"},"Download source"),(0,o.kt)("p",null,"Download from GitHub (HTTPS)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/input-output-hk/mithril.git\n")),(0,o.kt)("p",null,"Or (SSH)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:input-output-hk/mithril.git\n")),(0,o.kt)("h2",{id:"change-directory"},"Change directory"),(0,o.kt)("p",null,"Go to the devnet folder"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd mithril-test-lab/mithril-devnet\n")),(0,o.kt)("h2",{id:"run-a-private-mithrilcardano-network-locally-devnet"},"Run a Private Mithril/Cardano network locally (",(0,o.kt)("inlineCode",{parentName:"h2"},"devnet"),")"),(0,o.kt)("h3",{id:"step-1-launch-the-devnet"},"Step 1: Launch the devnet"),(0,o.kt)("p",null,"Open a first terminal window."),(0,o.kt)("p",null,"Run a devnet with 1 BTF and 2 SPO Cardano nodes."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Option 1"),": Remote Docker images"),(0,o.kt)("p",null,"The network will be ready faster with remote Docker images."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"MITHRIL_IMAGE_ID=latest NUM_BFT_NODES=1 NUM_POOL_NODES=2 ./devnet-run.sh\n")),(0,o.kt)("p",null,"Or"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Option 2"),": Local Docker images"),(0,o.kt)("p",null,"This takes more time to build local Docker images of the Mithril nodes"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"NUM_BFT_NODES=1 NUM_POOL_NODES=2 ./devnet-run.sh\n")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"You will see that the devnet is launched with the following steps:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Bootstraping the devnet"),": generates the artifacts of the devnet depending on the configuration parameters (cryptographic keys, network topology, transactions to setup pool nodes, ...)"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Start Cardano Network"),": run the nodes of the ",(0,o.kt)("strong",{parentName:"li"},"Cardano Network"),", waits for it to be ready and activate the pool nodes"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Start Mithril Network"),": run the nodes of the ",(0,o.kt)("strong",{parentName:"li"},"Mithril Network")," that works on top of the ",(0,o.kt)("strong",{parentName:"li"},"Cardano Network")))),(0,o.kt)("p",null,"You should see the following information displayed"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'=====================================================================\n Bootstrap Mithril/Cardano devnet\n=====================================================================\n\n>> Directory: artifacts\n>> Cardano BFT nodes: 1\n>> Cardano SPO nodes: 2\n>> Info: Mithril Aggregator will be attached to the first Cardano BFT node\n>> Info: Mithril Signers will be attached to each Cardano SPO node\n\n=====================================================================\n Start Cardano nodes\n=====================================================================\n\n>> Start Cardano network\ncardano-node: no process found\n>> Starting Cardano node \'node-bft1\'\n>> Starting Cardano node \'node-pool1\'\n>> Starting Cardano node \'node-pool2\'\n>> Wait for Cardano network to be ready\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Not ready yet\n>>>> Ready!\n>> Activate Cardano pools\nEstimated transaction fee: Lovelace 843\nTransaction successfully submitted.\nEstimated transaction fee: Lovelace 843\nTransaction successfully submitted.\n>> Wait for Cardano pools to be activated\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Not activated yet\n>>>> Activated!\n>>>> Found PoolId: pool1v55rfy864kslz86u45w4juahtuqr7cy282rffdnpc9exjlguvys\n>>>> Found PoolId: pool1c56jqj5qsala8c24829sxqp0fcrtrrtcmezgrs6w60hl2nwsvav\n\n=====================================================================\n Start Mithril nodes\n=====================================================================\n\n>> Start Mithril network\n>> Build Mithril node Docker images\n>>>> Building Mithril Aggregator node Docker image\n>>>> Building Mithril Client node Docker image\n>>>> Building Mithril Signer node Docker image\nNo stopped containers\nCreating network "artifacts_cardano_network" with driver "bridge"\nCreating network "artifacts_mithril_network" with driver "bridge"\nCreating artifacts_mithril-aggregator_1        ... done\nCreating artifacts_mithril-signer-node-pool1_1 ... done\nCreating artifacts_mithril-signer-node-pool2_1 ... done\nCreating artifacts_mithril-aggregator-genesis_run ... done\n{"msg":"Started","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.925641527Z","hostname":"e932dff845aa","pid":1,"config":"Configuration { cardano_cli_path: \\"/app/bin/cardano-cli\\", cardano_node_socket_path: \\"/data/ipc/node.sock\\", network_magic: Some(42), network: \\"devnet\\", protocol_parameters: ProtocolParameters { k: 5, m: 100, phi_f: 0.65 }, url_snapshot_manifest: \\"\\", snapshot_store_type: Local, snapshot_uploader_type: Local, server_url: \\"http://0.0.0.0:8080/\\", run_interval: 1000, db_directory: \\"/data/db\\", snapshot_directory: \\"/data/mithril/aggregator\\", data_stores_directory: \\"/data/mithril/aggregator/stores\\", genesis_verification_key: \\"5b33322c3235332c3138362c3230312c3137372c31312c3131372c3133352c3138372c3136372c3138312c3138382c32322c35392c3230362c3130352c3233312c3135302c3231352c33302c37382c3231322c37362c31362c3235322c3138302c37322c3133342c3133372c3234372c3136312c36385d\\" }","run_mode":"dev"}\n{"msg":"New LocalSnapshotUploader created","v":0,"name":"slog-rs","level":20Genesis bootstrap for test only\n,"time":"2022-09-06T09:24:31.925683285Z","hostname":"e932dff845aa","pid":1,"snapshot_server_url":"http://0.0.0.0:8080/"}\n{"msg":"New MultiSignerImpl created","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.925711468Z","hostname":"e932dff845aa","pid":1}\n{"msg":"New MithrilCertificateVerifier created","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.925736796Z","hostname":"e932dff845aa","pid":1}\n{"msg":"Update current_beacon to Beacon { network: \\"devnet\\", epoch: Epoch(10), immutable_file_number: 47 }","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.938337155Z","hostname":"e932dff845aa","pid":1}\n{"msg":"Get next signers with stake","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.938384324Z","hostname":"e932dff845aa","pid":1}\n{"msg":"Get next stake distribution","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.938422585Z","hostname":"e932dff845aa","pid":1}\n{"msg":"Get stake distribution with epoch offset","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.938459565Z","hostname":"e932dff845aa","pid":1,"epoch_offset":0}\n{"msg":"Get next protocol parameters","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.938500461Z","hostname":"e932dff845aa","pid":1}\n{"msg":"Get protocol parameters with epoch offset","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.938535367Z","hostname":"e932dff845aa","pid":1,"epoch_offset":0}\n{"msg":"Create clerk","v":0,"name":"slog-rs","level":20,"time":"2022-09-06T09:24:31.93856896Z","hostname":"e932dff845aa","pid":1}\nVerify genesis certificate #86a4c56d957636740a75c250fdd9d3b9a9f1539dc93449b1f80fcab49e279d6d @ epoch #10\n\n=====================================================================\n Schedule Cardano Stake Delegation\n=====================================================================\n\n>> Begin scheduled delegation\n>> 11:24:32: Wait 180s until next delegation round...\n>> Run delegation round #1!\n>>>> Current Epoch: 12\nEstimated transaction fee: Lovelace 436\nTransaction successfully submitted.\nEstimated transaction fee: Lovelace 436\nTransaction successfully submitted.\n>> 11:27:32: Wait 180s until next delegation round...\n>> Run delegation round #2!\n>>>> Current Epoch: 14\nEstimated transaction fee: Lovelace 436\nTransaction successfully submitted.\nEstimated transaction fee: Lovelace 436\nTransaction successfully submitted.\n>> 11:30:32: Wait 180s until next delegation round...\n')),(0,o.kt)("h3",{id:"step-2-query-the-devnet"},"Step 2: Query the devnet"),(0,o.kt)("p",null,"Open a second terminal window."),(0,o.kt)("p",null,"Watch the state queried from the devnet"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"watch -n 1 ./devnet-query.sh\n")),(0,o.kt)("p",null,"The networks will be queried every ",(0,o.kt)("inlineCode",{parentName:"p"},"1s")," and will display:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Certificate production informations gathered from the ",(0,o.kt)("strong",{parentName:"li"},"Mithril Network")),(0,o.kt)("li",{parentName:"ul"},"Utxo, Stake Pools, Stake Distribution from the ",(0,o.kt)("strong",{parentName:"li"},"Cardano Network"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'=====================================================================\n Query Mithril/Cardano devnet\n=====================================================================\n\n=====================================================================\n=== Mithril Network\n=====================================================================\n\n>> Query pending certificate\n{\n  "beacon": {\n    "network": "devnet",\n    "epoch": 2,\n    "immutable_file_number": 6\n  },\n  "protocol": {\n    "k": 5,\n    "m": 100,\n    "phi_f": 0.65\n  },\n  "signers": []\n}\n\n>> Query snapshots\n[\n  {\n    "digest": "224b77ad9cbe7fc81e6808940d391b299c27e77d9978641025f382e2e5ddd2ac",\n    "certificate_hash": "5b29543c4af0f369d40e1da53451ebd8a39c4263df1585eb072f54511c1e3333",\n    "size": 7986,\n    "created_at": "2022-07-05T11:26:55.855498395Z",\n    "locations": [\n      "http://0.0.0.0:8080/aggregator/snapshot/224b77ad9cbe7fc81e6808940d391b299c27e77d9978641025f382e2e5ddd2ac/download"\n    ]\n  },\n  {\n    "digest": "1a39f57c906133421ab7b5c782762b6abff4771b5e9158a977e58db1edc26bd0",\n    "certificate_hash": "be758b84a4b495e82af48747356946efb509ccbc4b44a9c985e3cb3099e35c94",\n    "size": 6743,\n    "created_at": "2022-07-05T11:26:35.658661878Z",\n    "locations": [\n      "http://0.0.0.0:8080/aggregator/snapshot/1a39f57c906133421ab7b5c782762b6abff4771b5e9158a977e58db1edc26bd0/download"\n    ]\n  },\n  {\n    "digest": "fd1a39d28998ba18c96547f62d308c57612ed348be058f615c14db5228a947c1",\n    "certificate_hash": "4254a6176afbe17967ad1671e4619e9a3f3412115a63dd0eb0f5e8b64094128a",\n    "size": 6199,\n    "created_at": "2022-07-05T11:26:20.470029035Z",\n    "locations": [\n      "http://0.0.0.0:8080/aggregator/snapshot/fd1a39d28998ba18c96547f62d308c57612ed348be058f615c14db5228a947c1/download"\n    ]\n  }\n]\n\n=====================================================================\n=== Cardano Network\n=====================================================================\n\n>> Query chain tip\n{\n    "era": "Alonzo",\n    "syncProgress": "100.00",\n    "hash": "075fc8366d353b45debedfc6faa92148c8fad584d81dbb4ea7b8b4d121489452",\n    "epoch": 2,\n    "slot": 219,\n    "block": 9\n}\n\n>> Query whole utxo\n                           TxHash                                 TxIx        Amount\n--------------------------------------------------------------------------------------\n4980fb7c90bc003f6af65778008732cd1b1a8c0873b7d622bfb7442f1312c9b5     0        447999157 lovelace + TxOutDatumNone\n4980fb7c90bc003f6af65778008732cd1b1a8c0873b7d622bfb7442f1312c9b5     1        2000000 lovelace + TxOutDatumNone\nc31e535531c9eb32bdd8f05e25204186333262674d24c6a770b6b120f020d9a9     0        448999157 lovelace + TxOutDatumNone\nc31e535531c9eb32bdd8f05e25204186333262674d24c6a770b6b120f020d9a9     1        1000000 lovelace + TxOutDatumNone\ned265b672873192ea1e9c19092e8f41947c28977438bcff580312de37cfbd46c     0        1002000000 lovelace + TxOutDatumNone\n\n>> Query stake pools\npool1v55rfy864kslz86u45w4juahtuqr7cy282rffdnpc9exjlguvys\npool1c56jqj5qsala8c24829sxqp0fcrtrrtcmezgrs6w60hl2nwsvav\n\n>> Query stake distribution\n                           PoolId                                 Stake frac\n------------------------------------------------------------------------------\npool1v55rfy864kslz86u45w4juahtuqr7cy282rffdnpc9exjlguvys   1.052e-3\npool1c56jqj5qsala8c24829sxqp0fcrtrrtcmezgrs6w60hl2nwsvav   5.258e-4\n')),(0,o.kt)("h3",{id:"step-3-observe-the-devnet"},"Step 3: Observe the devnet"),(0,o.kt)("p",null,"Open a third terminal window."),(0,o.kt)("p",null,"Watch the logs of each node of the devnet"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"watch -n 1 LINES=5 ./devnet-log.sh\n")),(0,o.kt)("p",null,"The nodes will be queried every ",(0,o.kt)("inlineCode",{parentName:"p"},"1s")," and will display as below"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'=====================================================================\n Logs Mithril/Cardano devnet\n=====================================================================\n\n=====================================================================\n--  docker-compose logs --tail=5\n=====================================================================\nAttaching to artifacts_mithril-signer-node-pool1_1, artifacts_mithril-signer-node-pool2_1, artifacts_mithril-aggregator_1\nmithril-aggregator_1         | {"msg":"Epoch computation is not final and needs to be fixed: 4","v":0,"name":"slog-rs","level":40,"time":"2022-07-05T11:29:32.726760492Z","hostname":"ba17593540ac","pid":1}\nmithril-aggregator_1         | {"msg":"Get signer pool1c56jqj5qsala8c24829sxqp0fcrtrrtcmezgrs6w60hl2nwsvav","v":0,"name":"slog-rs","level":20,"time":"2022-07-05T11:29:32.72678048Z","hostname":"ba17593540ac","pid":1}\nmithril-aggregator_1         | {"msg":"Epoch computation is not final and needs to be fixed: 4","v":0,"name":"slog-rs","level":40,"time":"2022-07-05T11:29:32.72679661Z","hostname":"ba17593540ac","pid":1}\nmithril-aggregator_1         | {"msg":"Get signer pool1v55rfy864kslz86u45w4juahtuqr7cy282rffdnpc9exjlguvys","v":0,"name":"slog-rs","level":20,"time":"2022-07-05T11:29:32.734529107Z","hostname":"ba17593540ac","pid":1}\nmithril-aggregator_1         | {"msg":"Epoch computation is not final and needs to be fixed: 4","v":0,"name":"slog-rs","level":40,"time":"2022-07-05T11:29:32.734553714Z","hostname":"ba17593540ac","pid":1}\nmithril-signer-node-pool1_1  | {"msg":"Signing digest","v":0,"name":"slog-rs","level":30,"time":"2022-07-05T11:29:32.744124074Z","hostname":"4fc53f5ce413","pid":1,"digester_result":"DigesterResult {\\n    digest: \\"e5ac1579a3fff12bf19ef88b0d9ec9d8a1c53e4d74c38c023b2e33638f454d67\\",\\n    last_immutable_file_number: 17,\\n}"}\nmithril-signer-node-pool1_1  | {"msg":"Register signatures","v":0,"name":"slog-rs","level":30,"time":"2022-07-05T11:29:32.744140625Z","hostname":"4fc53f5ce413","pid":1}\nmithril-signer-node-pool1_1  | {"msg":"Epoch computation is not final and needs to be fixed: 4","v":0,"name":"slog-rs","level":40,"time":"2022-07-05T11:29:32.744155293Z","hostname":"4fc53f5ce413","pid":1}\nmithril-signer-node-pool1_1  | {"msg":"SingleSignaturesComputeFailed(UnregisteredVerificationKey)","v":0,"name":"slog-rs","level":50,"time":"2022-07-05T11:29:32.744336041Z","hostname":"4fc53f5ce413","pid":1}\nmithril-signer-node-pool1_1  | {"msg":"Sleeping for 1000","v":0,"name":"slog-rs","level":30,"time":"2022-07-05T11:29:32.744352051Z","hostname":"4fc53f5ce413","pid":1}\nmithril-signer-node-pool2_1  | {"msg":"Signing digest","v":0,"name":"slog-rs","level":30,"time":"2022-07-05T11:29:32.73359119Z","hostname":"1c671096ee3f","pid":1,"digester_result":"DigesterResult {\\n    digest: \\"e5ac1579a3fff12bf19ef88b0d9ec9d8a1c53e4d74c38c023b2e33638f454d67\\",\\n    last_immutable_file_number: 17,\\n}"}\nmithril-signer-node-pool2_1  | {"msg":"Register signatures","v":0,"name":"slog-rs","level":30,"time":"2022-07-05T11:29:32.733607821Z","hostname":"1c671096ee3f","pid":1}\nmithril-signer-node-pool2_1  | {"msg":"Epoch computation is not final and needs to be fixed: 4","v":0,"name":"slog-rs","level":40,"time":"2022-07-05T11:29:32.733623511Z","hostname":"1c671096ee3f","pid":1}\nmithril-signer-node-pool2_1  | {"msg":"SingleSignaturesComputeFailed(UnregisteredVerificationKey)","v":0,"name":"slog-rs","level":50,"time":"2022-07-05T11:29:32.733786246Z","hostname":"1c671096ee3f","pid":1}\nmithril-signer-node-pool2_1  | {"msg":"Sleeping for 1000","v":0,"name":"slog-rs","level":30,"time":"2022-07-05T11:29:32.733802416Z","hostname":"1c671096ee3f","pid":1}\n\n=====================================================================\n=====================================================================\ntail -n 22 ./node-bft1/node.log\n=====================================================================\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:28.01 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 219, dsSuffix = Nothing} at 075fc8366d353b45debedfc6faa92148c8fad584d81dbb4ea7b8b4d121489452 at slot 219\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:40.76 UTC] Chain extended, new tip: af93c6964de49d0696bf194c222f6e5a40e5123ef688a20613a33a705b6b736a at slot 253\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:40.76 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 228, dsSuffix = Nothing} at 720c625a259a23f21926fe7a30dad9b7a4b50958a508c8cfdc96a94625fbf00d at slot 228\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:43.75 UTC] Chain extended, new tip: 9f141fe78c0baa433c2554d3a09a9b43c47faa7b740be254893000310e5bad3b at slot 257\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:52.76 UTC] Chain extended, new tip: bfc0b2c1c4d06699efcdf6ad7b33c48cea722fb4bb5c5d6761a3768609cf77a4 at slot 269\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:52.76 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 253, dsSuffix = Nothing} at af93c6964de49d0696bf194c222f6e5a40e5123ef688a20613a33a705b6b736a at slot 253\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:03.26 UTC] Chain extended, new tip: c6238e98f186278eeef86d13f3482ebfb9b1d01d2a28da78282bfd241524eccd at slot 283\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:03.26 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 257, dsSuffix = Nothing} at 9f141fe78c0baa433c2554d3a09a9b43c47faa7b740be254893000310e5bad3b at slot 257\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:04.75 UTC] Chain extended, new tip: ac332aea5f043b3fd5ac68a04225932a21935ad7e5c5cfbb7e5b0b00df713bff at slot 285\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:16.00 UTC] Chain extended, new tip: e68d08e0c127a5346a74dd06713d8de0b4e37e338a0e03987da356bb70892b99 at slot 300\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:16.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 283, dsSuffix = Nothing} at c6238e98f186278eeef86d13f3482ebfb9b1d01d2a28da78282bfd241524eccd at slot 283\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:18.25 UTC] Chain extended, new tip: bc07b985d7f76bacc0a726b2dc5aa76a7254f1e4548a633cdfd62c31e022b3a5 at slot 303\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:37.00 UTC] Chain extended, new tip: 7d53c5eba9679c96ba32d79a02cfd953280b3477f1dd8eeb18447638c8a30e20 at slot 328\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:37.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 300, dsSuffix = Nothing} at e68d08e0c127a5346a74dd06713d8de0b4e37e338a0e03987da356bb70892b99 at slot 300\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:58.75 UTC] Chain extended, new tip: 3e9734018c585eea160a33accf82f758713f0e7aae1fab4dc40bccd859b8066f at slot 357\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:58.75 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 303, dsSuffix = Nothing} at bc07b985d7f76bacc0a726b2dc5aa76a7254f1e4548a633cdfd62c31e022b3a5 at slot 303\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:05.50 UTC] Chain extended, new tip: 8876850840ae52ca240d517def4b9c8a5db98e2e7db17f8abf87e4f12db13d15 at slot 366\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:05.50 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 328, dsSuffix = Nothing} at 7d53c5eba9679c96ba32d79a02cfd953280b3477f1dd8eeb18447638c8a30e20 at slot 328\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:19.75 UTC] Chain extended, new tip: 5733ec701db5c9dc253dd4b611421de0c2d223e6ee99c8d61010a9fea42d504b at slot 385\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:19.75 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 357, dsSuffix = Nothing} at 3e9734018c585eea160a33accf82f758713f0e7aae1fab4dc40bccd859b8066f at slot 357\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:31.00 UTC] Chain extended, new tip: 331c824ebee92dee7717f7bcc1457ac89b0de33d76073e6edd97a28770fa364b at slot 400\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:31.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 366, dsSuffix = Nothing} at 8876850840ae52ca240d517def4b9c8a5db98e2e7db17f8abf87e4f12db13d15 at slot 366\n=====================================================================\n\n=====================================================================\ntail -n 22 ./node-pool1/node.log\n=====================================================================\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:28.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 219, dsSuffix = Nothing} at 075fc8366d353b45debedfc6faa92148c8fad584d81dbb4ea7b8b4d121489452 at slot 219\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:40.76 UTC] Chain extended, new tip: af93c6964de49d0696bf194c222f6e5a40e5123ef688a20613a33a705b6b736a at slot 253\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:40.76 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 228, dsSuffix = Nothing} at 720c625a259a23f21926fe7a30dad9b7a4b50958a508c8cfdc96a94625fbf00d at slot 228\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:43.76 UTC] Chain extended, new tip: 9f141fe78c0baa433c2554d3a09a9b43c47faa7b740be254893000310e5bad3b at slot 257\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:52.75 UTC] Chain extended, new tip: bfc0b2c1c4d06699efcdf6ad7b33c48cea722fb4bb5c5d6761a3768609cf77a4 at slot 269\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:52.75 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 253, dsSuffix = Nothing} at af93c6964de49d0696bf194c222f6e5a40e5123ef688a20613a33a705b6b736a at slot 253\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:03.26 UTC] Chain extended, new tip: c6238e98f186278eeef86d13f3482ebfb9b1d01d2a28da78282bfd241524eccd at slot 283\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:03.26 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 257, dsSuffix = Nothing} at 9f141fe78c0baa433c2554d3a09a9b43c47faa7b740be254893000310e5bad3b at slot 257\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:04.75 UTC] Chain extended, new tip: ac332aea5f043b3fd5ac68a04225932a21935ad7e5c5cfbb7e5b0b00df713bff at slot 285\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:16.00 UTC] Chain extended, new tip: e68d08e0c127a5346a74dd06713d8de0b4e37e338a0e03987da356bb70892b99 at slot 300\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:16.01 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 283, dsSuffix = Nothing} at c6238e98f186278eeef86d13f3482ebfb9b1d01d2a28da78282bfd241524eccd at slot 283\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:18.25 UTC] Chain extended, new tip: bc07b985d7f76bacc0a726b2dc5aa76a7254f1e4548a633cdfd62c31e022b3a5 at slot 303\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:37.00 UTC] Chain extended, new tip: 7d53c5eba9679c96ba32d79a02cfd953280b3477f1dd8eeb18447638c8a30e20 at slot 328\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:37.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 300, dsSuffix = Nothing} at e68d08e0c127a5346a74dd06713d8de0b4e37e338a0e03987da356bb70892b99 at slot 300\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:58.76 UTC] Chain extended, new tip: 3e9734018c585eea160a33accf82f758713f0e7aae1fab4dc40bccd859b8066f at slot 357\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:58.76 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 303, dsSuffix = Nothing} at bc07b985d7f76bacc0a726b2dc5aa76a7254f1e4548a633cdfd62c31e022b3a5 at slot 303\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:05.50 UTC] Chain extended, new tip: 8876850840ae52ca240d517def4b9c8a5db98e2e7db17f8abf87e4f12db13d15 at slot 366\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:05.51 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 328, dsSuffix = Nothing} at 7d53c5eba9679c96ba32d79a02cfd953280b3477f1dd8eeb18447638c8a30e20 at slot 328\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:19.75 UTC] Chain extended, new tip: 5733ec701db5c9dc253dd4b611421de0c2d223e6ee99c8d61010a9fea42d504b at slot 385\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:19.76 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 357, dsSuffix = Nothing} at 3e9734018c585eea160a33accf82f758713f0e7aae1fab4dc40bccd859b8066f at slot 357\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:31.00 UTC] Chain extended, new tip: 331c824ebee92dee7717f7bcc1457ac89b0de33d76073e6edd97a28770fa364b at slot 400\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:31.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 366, dsSuffix = Nothing} at 8876850840ae52ca240d517def4b9c8a5db98e2e7db17f8abf87e4f12db13d15 at slot 366\n=====================================================================\n\n=====================================================================\ntail -n 22 ./node-pool2/node.log\n=====================================================================\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:28.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 219, dsSuffix = Nothing} at 075fc8366d353b45debedfc6faa92148c8fad584d81dbb4ea7b8b4d121489452 at slot 219\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:40.75 UTC] Chain extended, new tip: af93c6964de49d0696bf194c222f6e5a40e5123ef688a20613a33a705b6b736a at slot 253\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:40.75 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 228, dsSuffix = Nothing} at 720c625a259a23f21926fe7a30dad9b7a4b50958a508c8cfdc96a94625fbf00d at slot 228\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:43.76 UTC] Chain extended, new tip: 9f141fe78c0baa433c2554d3a09a9b43c47faa7b740be254893000310e5bad3b at slot 257\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:27:52.75 UTC] Chain extended, new tip: bfc0b2c1c4d06699efcdf6ad7b33c48cea722fb4bb5c5d6761a3768609cf77a4 at slot 269\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:27:52.76 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 253, dsSuffix = Nothing} at af93c6964de49d0696bf194c222f6e5a40e5123ef688a20613a33a705b6b736a at slot 253\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:03.25 UTC] Chain extended, new tip: c6238e98f186278eeef86d13f3482ebfb9b1d01d2a28da78282bfd241524eccd at slot 283\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:03.25 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 257, dsSuffix = Nothing} at 9f141fe78c0baa433c2554d3a09a9b43c47faa7b740be254893000310e5bad3b at slot 257\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:04.75 UTC] Chain extended, new tip: ac332aea5f043b3fd5ac68a04225932a21935ad7e5c5cfbb7e5b0b00df713bff at slot 285\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:16.00 UTC] Chain extended, new tip: e68d08e0c127a5346a74dd06713d8de0b4e37e338a0e03987da356bb70892b99 at slot 300\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:16.01 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 283, dsSuffix = Nothing} at c6238e98f186278eeef86d13f3482ebfb9b1d01d2a28da78282bfd241524eccd at slot 283\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:18.25 UTC] Chain extended, new tip: bc07b985d7f76bacc0a726b2dc5aa76a7254f1e4548a633cdfd62c31e022b3a5 at slot 303\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:37.00 UTC] Chain extended, new tip: 7d53c5eba9679c96ba32d79a02cfd953280b3477f1dd8eeb18447638c8a30e20 at slot 328\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:37.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 300, dsSuffix = Nothing} at e68d08e0c127a5346a74dd06713d8de0b4e37e338a0e03987da356bb70892b99 at slot 300\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:28:58.76 UTC] Chain extended, new tip: 3e9734018c585eea160a33accf82f758713f0e7aae1fab4dc40bccd859b8066f at slot 357\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:28:58.76 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 303, dsSuffix = Nothing} at bc07b985d7f76bacc0a726b2dc5aa76a7254f1e4548a633cdfd62c31e022b3a5 at slot 303\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:05.50 UTC] Chain extended, new tip: 8876850840ae52ca240d517def4b9c8a5db98e2e7db17f8abf87e4f12db13d15 at slot 366\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:05.50 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 328, dsSuffix = Nothing} at 7d53c5eba9679c96ba32d79a02cfd953280b3477f1dd8eeb18447638c8a30e20 at slot 328\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:19.75 UTC] Chain extended, new tip: 5733ec701db5c9dc253dd4b611421de0c2d223e6ee99c8d61010a9fea42d504b at slot 385\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:19.76 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 357, dsSuffix = Nothing} at 3e9734018c585eea160a33accf82f758713f0e7aae1fab4dc40bccd859b8066f at slot 357\n[jp:cardano.node.ChainDB:Notice:21] [2022-07-05 11:29:31.00 UTC] Chain extended, new tip: 331c824ebee92dee7717f7bcc1457ac89b0de33d76073e6edd97a28770fa364b at slot 400\n[jp:cardano.node.ChainDB:Info:25] [2022-07-05 11:29:31.00 UTC] Took ledger snapshot DiskSnapshot {dsNumber = 366, dsSuffix = Nothing} at 8876850840ae52ca240d517def4b9c8a5db98e2e7db17f8abf87e4f12db13d15 at slot 366\n=====================================================================\n\n')),(0,o.kt)("h2",{id:"interact-with-the-mithril-aggregator-by-using-the-mithril-client"},"Interact with the Mithril Aggregator by using the Mithril Client"),(0,o.kt)("h3",{id:"step-1-prepare-some-useful-variables"},"Step 1: Prepare some useful variables"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Cardano network\nNETWORK=devnet\n\n# Aggregator API endpoint URL\nAGGREGATOR_ENDPOINT=http://localhost:8080/aggregator\n\n# Digest of the latest produced snapshot for convenience of the demo\n# You can also modify this variable and set it to the value of the digest of a snapshot that you can retrieve at step 2\nSNAPSHOT_DIGEST=$(curl -s $AGGREGATOR_ENDPOINT/snapshots | jq -r '.[0].digest')\n")),(0,o.kt)("h3",{id:"step-2-select-a-snapshot"},"Step 2: Select A Snapshot"),(0,o.kt)("p",null,"List the available snapshots with which you can bootstrap a Cardano node"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"NETWORK=$NETWORK AGGREGATOR_ENDPOINT=$AGGREGATOR_ENDPOINT ./mithril-client list\n")),(0,o.kt)("p",null,"You will see a list of snapshots"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"+---------+------------------------------------------------------------------+-------+-----------+--------------------------------+\n| Network | Digest                                                           | Size  | Locations | Created                        |\n+---------+------------------------------------------------------------------+-------+-----------+--------------------------------+\n| devnet  | 85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917 | 11808 |         1 | 2022-07-04T16:47:00.258482685Z |\n+---------+------------------------------------------------------------------+-------+-----------+--------------------------------+\n| devnet  | 60d9c6e014d22335b34f55f83da728667f04fc1c63152ccff0bce7d217d08447 | 10793 |         1 | 2022-07-04T16:46:45.069646321Z |\n+---------+------------------------------------------------------------------+-------+-----------+--------------------------------+\n| devnet  | a3c4bb5f413f1b9648f0a086b3752d25ec62b540b8390917a5a7e78809896d92 |  7991 |         1 | 2022-07-04T16:46:09.817821220Z |\n+---------+------------------------------------------------------------------+-------+-----------+--------------------------------+\n| devnet  | b952adaa04dbb42206c69589b9951660f40c7262b088b13434b7a446ec90bc36 |  6746 |         1 | 2022-07-04T16:45:49.616260734Z |\n+---------+------------------------------------------------------------------+-------+-----------+--------------------------------+\n| devnet  | 46425fdcfe89ad5ba41a7822a4395e21b539e80c20e2b10546017b14cdcd4e4b |  6196 |         1 | 2022-07-04T16:45:29.425195132Z |\n+---------+------------------------------------------------------------------+-------+-----------+--------------------------------+\n")),(0,o.kt)("h3",{id:"step-3-show-snapshot-details"},"Step 3: Show Snapshot Details"),(0,o.kt)("p",null,"Get some more details from a specific snapshot (Optional)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"NETWORK=$NETWORK AGGREGATOR_ENDPOINT=$AGGREGATOR_ENDPOINT ./mithril-client show $SNAPSHOT_DIGEST\n")),(0,o.kt)("p",null,"You will see more information about a snapshot"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"+------------+-------------------------------------------------------------------------------------------------------------------+\n| Info       | Value                                                                                                             |\n+------------+-------------------------------------------------------------------------------------------------------------------+\n| Network    | devnet                                                                                                            |\n+------------+-------------------------------------------------------------------------------------------------------------------+\n| Digest     | 85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917                                                  |\n+------------+-------------------------------------------------------------------------------------------------------------------+\n| Size       | 11808                                                                                                             |\n+------------+-------------------------------------------------------------------------------------------------------------------+\n| Location 1 | http://0.0.0.0:8080/aggregator/snapshot/85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917/download |\n+------------+-------------------------------------------------------------------------------------------------------------------+\n| Created    | 2022-07-04T16:47:00.258482685Z                                                                                    |\n+------------+-------------------------------------------------------------------------------------------------------------------+\n")),(0,o.kt)("h3",{id:"step-4-download-selected-snapshot"},"Step 4: Download Selected Snapshot"),(0,o.kt)("p",null,"Download the selected snapshot from the remote location to your remote location"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"NETWORK=$NETWORK AGGREGATOR_ENDPOINT=$AGGREGATOR_ENDPOINT ./mithril-client download $SNAPSHOT_DIGEST\n")),(0,o.kt)("p",null,"You will see that the selected snapshot archive has been downloaded locally"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Download success 85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917 #1\nfrom http://0.0.0.0:8080/aggregator/snapshot/85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917/download\nto /home/mithril/data/devnet /85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917/snapshot.archive.tar.gz\n")),(0,o.kt)("h3",{id:"step-5-restore-selected-snapshot"},"Step 5: Restore Selected Snapshot"),(0,o.kt)("p",null,"Verify the Certificate of the snapshot and unpack its content in order to feed the Cardano node database"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"NETWORK=$NETWORK AGGREGATOR_ENDPOINT=$AGGREGATOR_ENDPOINT ./mithril-client restore $SNAPSHOT_DIGEST\n")),(0,o.kt)("p",null,"You will see that the snapshot archive is unpacked and that the associated certificate is valid"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'Unpacking snapshot...\nUnpack success 85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917\nto /home/mithril/data/devnet /85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917/db\n\nRestore a Cardano Node with:\n\ndocker run -v cardano-node-ipc:/ipc -v cardano-node-data:/data \\\n  --mount type=bind,source="./data/devnet/85f09b39b0b5a13cec9d8fe7ffb82b5e5f236f02ae896f4e47b77e5cd1f2a917/db",target=/data/db/ \\\n  -e NETWORK=devnet \\\n  inputoutput/cardano-node\n')))}p.isMDXComponent=!0},4861:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/devnet-topology-ca1bd25169f32020115ed1c52a4d1d59.png"}}]);