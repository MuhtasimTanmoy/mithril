<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-test-lab/test-lab-design">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/doc/adr/rss.xml" title="Mithril RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/adr/atom.xml" title="Mithril Atom Feed"><title data-rh="true">Mithril Test Lab Design | Mithril</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://input-output-hk.github.io/doc/test-lab/test-lab-design"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mithril Test Lab Design | Mithril"><meta data-rh="true" name="description" content="Summary"><meta data-rh="true" property="og:description" content="Summary"><link data-rh="true" rel="icon" href="/doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://input-output-hk.github.io/doc/test-lab/test-lab-design"><link data-rh="true" rel="alternate" href="https://input-output-hk.github.io/doc/test-lab/test-lab-design" hreflang="en"><link data-rh="true" rel="alternate" href="https://input-output-hk.github.io/doc/test-lab/test-lab-design" hreflang="x-default"><link rel="stylesheet" href="/doc/assets/css/styles.7e29f003.css">
<link rel="preload" href="/doc/assets/js/runtime~main.1f66bf35.js" as="script">
<link rel="preload" href="/doc/assets/js/main.7c29440d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc/"><div class="navbar__logo"><img src="/doc/img/logo.png" alt="Mithril Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/doc/img/logo.png" alt="Mithril Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Mithril</b></a><a class="navbar__item navbar__link" href="/doc/intro">Getting Started</a><a class="navbar__item navbar__link" href="/doc/core-concepts/">Core Concepts</a><a class="navbar__item navbar__link" href="/doc/topologies/">Topologies</a><a class="navbar__item navbar__link navbar__link--active" href="/doc/test-lab/">Test Lab</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">developer doc</a><ul class="dropdown__menu"><li><a href="http://mithril.network/mithril-aggregator/doc/mithril_aggregator/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Aggregator Rust documentation</a></li><li><a href="http://mithril.network/mithril-signer/doc/mithril_signer/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Signer Rust documentation</a></li><li><a href="http://mithril.network/mithril-client/doc/mithril_client/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Client Rust documentation</a></li><li><a class="dropdown__link" href="/doc/aggregator-api">Aggegator HTTP API</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/doc/glossary">Glossary</a><a class="navbar__item navbar__link" href="/doc/adr">ADRs</a><a href="https://github.com/input-output-hk/mithril/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" html=":before"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/test-lab/">Mithril Test Lab</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/test-lab/test-lab-overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/doc/test-lab/test-lab-design">Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/test-lab/mithril-adversarial-scenarios">Adversarial Events</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/doc/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Design</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Mithril Test Lab Design</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="summary">Summary<a class="hash-link" href="#summary" title="Direct link to heading">‚Äã</a></h2><p>The overall goal of the Mithril test lab is simple. We wish to develop a framework that can assess the correctness of
Mithril nodes, as well as their resistance to certain classes of attacks.</p><p>The best solution of this problem involves attacking an open question in concurrent systems correctness research: Can we
build a unified framework that combines abstract modelling and reasoning with implementation correctness checks or
guarantees?</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="goals">Goals<a class="hash-link" href="#goals" title="Direct link to heading">‚Äã</a></h2><p>The test lab should stand as a method for immediately testing and assessing node implementations. In order, the test-lab
should be able to answer the following about a node or collection of nodes:</p><ul><li>Does it appear to have implemented the necessary functionality?</li><li>Can it participate correctly in a well-functioning network?</li><li>Is it resilient against any accidental or random failures?</li><li>Can it withstand specific attacks agains the protocol or crytography?</li></ul><p>The test-lab should be depolyable by anyone who might want to deploy their own node, and programmable by anyone who
might want to program a node. An example of things that a programmer might ask the test lab to do is:</p><ul><li>Does this network succesfully produce a correct signature in n seconds?</li><li>If a node lies about their stake, will other nodes still include them in a signature output?</li><li>If a cryptographic value is replaced, will a valid signature still be produced eventually?</li><li>What happens if two nodes try to use the same public key?</li><li>If we adjust the stake held by malicious nodes, at what point are they able to create an invalid signature?</li></ul><p>Another use for the test lab is in debugging. In general, concurrent systems are very hard to debug. The test lab should
do its best to recreate traces of events so that when a failure occurs, a programmer can step through precisely what
happened to cause it. If the test-lab is controllable enough, it might also eventually be able to replay traces in a
debug mode, so that the failing implemenation can be observed directly in the failing condition.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="architecture">Architecture<a class="hash-link" href="#architecture" title="Direct link to heading">‚Äã</a></h2><p>For the test lab to operate, we need to be able to do the following:</p><ul><li>Specify a model of the intended behavior of the system</li><li>(Optional/long term) Check those models and prove correctness</li><li>Specify attacks or problems that we want to test</li><li>Present a network layer that can be controlled and observed</li><li>Transform the models into observations and actions on the network</li><li>Orchestrate nodes to run and participate over the network</li><li>Track the behavior of nodes under test to explain what has gone wrong</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   ‚îÇModel Checkers‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ≤‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          ‚îÇ                               ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     Verified by                Can imply safety from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          ‚îÇ                               ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ‚îÇSystem Model‚îÇ                ‚îÇ Attack Model ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          ‚îÇ                               ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             Implemented in or layered on     Implemented in or layered on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          ‚îÇ                               ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îÇErrors with traces‚óÑ‚îÄ‚îÄ‚î§Monitors‚îÇ               ‚îÇStream Transformers‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        Observe                         Control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          ‚îî‚îÄ‚îÄ‚ñ∫Test Lab Network Layer‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ≤‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ≤‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   ‚îÇ          ‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       Drive Behavior    Communicate Over</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ          ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îÇControllable Reference Nodes‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚î§Heterogeneous production nodes‚îÇ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="model-specification">Model Specification<a class="hash-link" href="#model-specification" title="Direct link to heading">‚Äã</a></h2><p>We have chosen <em>monitors</em> for the underlying representation of the system model. Monitors consume traces and emit errors
if they are discovered. We are not currently certain if this is the best approach, instead monitors might want to emit
streams as well, which would allow for layering of monitors as well as the same underlying representations for
attacks/tests and models.</p><p>The main benefit of monitors is that they&#x27;re conceptually straightforward for engineers to understand. A monitor is just
a program about a trace. Monitors can be composed in various ways that should largely be comfortable to programmers.
They can be programmed in ways programmers are familiar with, instead of tying models to e.g. CSP or LTL. This works in
our solution because we will mainly be reasoning over concrete states rather than abstract ones.</p><p>While having the full power of Haskell available for monitor creation is a great upside, the downside is that they will
not be readily suitable for any form of model checking. State-based representations, for example, provide a more
concrete syntax that can be introspected on and reasoned about by model checkers.</p><p>The flexibility of monitors however, could allow us to &quot;split the difference&quot;. It should be possible to compile an
existing, checkable language such as P, Ivy, or TLA+ into a monitor representation. It would then be possible to
model-check the high-level language, but use the monitors for execution.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="attack-model-specification">Attack Model Specification<a class="hash-link" href="#attack-model-specification" title="Direct link to heading">‚Äã</a></h2><p>We expect to model attacks, or any kind of problem as transformations over the stream travelling over the network. This
will capture both random perturbations of data, as well as sophisticated, reactive attacks. Again, it should be possible
to layer other languages on top of this abstraction. In general making these languages a domain-specific as possible
should also tend to make them more usable.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="controllable-reference-nodes">Controllable Reference Nodes<a class="hash-link" href="#controllable-reference-nodes" title="Direct link to heading">‚Äã</a></h2><p>A wide range of both correct and incorrect behaviors are required to fully test the implementation of any network
protocol. Generating a wide range of correct behaviors can be done by simply creating an impelmentation that we believe
to be correct. This implementation can often be implemented in a simpler manner than a production implementation in
order to maximise its assurance. The correct implementation can then be used as a reference to check the behaviors and
results of other implementations.</p><p>A more complicated problem is how to generate incorrect behaviors. Arbitrary or naive errors are quite easy to generate
by transformign or mutating impelementations at the bit level. Such modifications can be effective in finding problems,
however they rely on random luck to trigger implementation bugs. Furthermore, reasoning about the wire-representation of
messages can be very painful for individuals that are used to thinking about messages as data-structures. In other
words, an engineer would rather write &quot;leave field A of Record B out completely&quot; than write &quot;delete bits N..N+L from
this message, where N is calcualted from information about the rest of the message&quot;. Unfortunately, most correct
implementations can make it completely impossible to generate messages that are incorrect, particularly messages that
violate data-structure invariants.</p><p>This exposes another requirement of a useful &quot;reference implementation&quot; which is to make it as controllable as possible.
That is, it should not only be useable as a correct reference, but it should be able to simulate almost any attacker
needed when required, either by generating subtly incorrect messages, or generating correct messages with <em>meaninguflly</em>
incorrect contents. In the case of Mithril, this could constitute dishonest state representations or cryptograpically
difficult values.</p><p>An open design question is if this kind of behavior should be built into a controllable reference node or if it can be
built as a powerful transformation layer on top of a correct reference node. Keeping them separate results in a more
purely correct reference node, which is valuable if it will be used as an implementation reference. Keeping the layers
separate <em>might</em> result in a less powerful attack capability, or at least higher difficulty in coordinating more
sophisticated attacks on the protocol under test.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="heterogeneous-nodes">Heterogeneous Nodes<a class="hash-link" href="#heterogeneous-nodes" title="Direct link to heading">‚Äã</a></h2><p>A node being tested will need:</p><ul><li>To be programmed over an abstract network that can be replaced with the test lab network,</li><li>To have implemented any APIs required by the specification of the protocol it implements,</li><li>If the protocol specifies any optional API requirements, implementing those will result in better test output</li></ul><p>Any node implemented in this way shold be able to be tested by the test lab. There will be an additional per-language
requirement for the test-lab to implement bindings to its network layer in each languages nodes under test will be
implemented in. Initially this will be done for Rust and Haskell.</p><p>We mention optional APIs because it might be useful for nodes being debugged to present more information about their
state. This will allow for more immediate and useful error traces if, for example, a node makes an incorrect decision
that would not be immediately observable on the network. In general, such APIs should not require any sensitive
information from nodes, in case those APIs are accentially left on in production.</p><p>One mode the test lab will be useful in is simply watching a collection of heterogeneous nodes operating and monitoring
for any incorrect behavior.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/input-output-hk/mithril/tree/main/docs/root/root/test-lab/test-lab-design.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doc/test-lab/test-lab-overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doc/test-lab/mithril-adversarial-scenarios"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Adversarial Events</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#goals" class="table-of-contents__link toc-highlight">Goals</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#model-specification" class="table-of-contents__link toc-highlight">Model Specification</a></li><li><a href="#attack-model-specification" class="table-of-contents__link toc-highlight">Attack Model Specification</a></li><li><a href="#controllable-reference-nodes" class="table-of-contents__link toc-highlight">Controllable Reference Nodes</a></li><li><a href="#heterogeneous-nodes" class="table-of-contents__link toc-highlight">Heterogeneous Nodes</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://iohk.io/en/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Input Output (Blog)</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 <strong>Input Output</strong> <br> <small>Built with Docusaurus</small></div></div></div></footer></div>
<script src="/doc/assets/js/runtime~main.1f66bf35.js"></script>
<script src="/doc/assets/js/main.7c29440d.js"></script>
</body>
</html>