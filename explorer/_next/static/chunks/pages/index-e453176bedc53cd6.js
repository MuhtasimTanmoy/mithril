(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5537)}])},5537:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var n=t(5893),r=t(7294),i=t(7337),a=t(7525),l=t(5968),c=t(3178),o=t(3489),h=t(5005);function d(e){return(0,n.jsx)(c.Z,{overlay:(0,n.jsx)(o.Z,{children:"Raw JSON"}),children:(0,n.jsx)(h.Z,{variant:"outline-secondary",target:"_blank",...e,children:(0,n.jsx)("i",{class:"bi bi-filetype-json",style:{color:"black"}})})})}function x(e){return(0,n.jsx)(c.Z,{overlay:(0,n.jsx)(o.Z,{children:e.tooltip}),children:(0,n.jsx)("a",{href:"#",className:"badge bg-success",children:(0,n.jsx)("i",{className:"bi bi-shield-lock"})})})}var j=t(9473);function g(e){let{protocolParameters:s}=e;return(0,n.jsxs)(l.Z,{horizontal:!0,children:[(0,n.jsxs)(l.Z.Item,{children:["k: ",null==s?void 0:s.k]}),(0,n.jsxs)(l.Z.Item,{children:["m: ",null==s?void 0:s.m]}),(0,n.jsxs)(l.Z.Item,{children:["f: ",null==s?void 0:s.phi_f]})]})}function u(e){let[s,t]=(0,r.useState)({}),c=(0,j.v9)(e=>e.settings.selectedAggregator),o=(0,j.v9)(e=>e.settings.autoUpdate),h=(0,j.v9)(e=>e.settings.updateInterval);return(0,r.useEffect)(()=>{if(!o)return;let e=()=>{fetch("".concat(c,"/certificate-pending")).then(e=>200===e.status?e.json():{}).then(e=>t(e)).catch(e=>{t({}),console.error("Fetch certificate-pending error:",e)})};e();let s=setInterval(e,h);return()=>clearInterval(s)},[c,h,o]),(0,n.jsxs)("div",{className:e.className,children:[(0,n.jsxs)("h2",{children:["Pending Certificate",0!==Object.entries(s).length&&(0,n.jsx)(d,{href:"".concat(c,"/certificate-pending"),variant:"outline-light",size:"sm"})]}),0===Object.entries(s).length?(0,n.jsx)("p",{children:"No pending certificate available"}):(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(a.Z,{children:(0,n.jsxs)(a.Z.Body,{children:[(0,n.jsx)(a.Z.Title,{children:"Beacon"}),(0,n.jsxs)(l.Z,{className:"margin-bottom--md",variant:"flush",children:[(0,n.jsxs)(l.Z.Item,{children:["Network: ",s.beacon.network]}),(0,n.jsxs)(l.Z.Item,{children:["Epoch: ",s.beacon.epoch]}),(0,n.jsxs)(l.Z.Item,{children:["Immutable File Number: ",s.beacon.immutable_file_number]})]}),(0,n.jsx)(a.Z.Title,{children:"Protocol Parameters"}),(0,n.jsx)(g,{protocolParameters:s.protocol})]})}),(0,n.jsx)(a.Z,{children:(0,n.jsxs)(a.Z.Body,{children:[(0,n.jsx)(a.Z.Title,{children:"Signers"}),0===s.signers.length?(0,n.jsx)("div",{children:"No Signers registered"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{variant:"flush",children:[(0,n.jsx)(l.Z.Item,{children:(0,n.jsx)("b",{children:"Party id"})}),s.signers.map(e=>(0,n.jsxs)(l.Z.Item,{children:[e.party_id,e.verification_key_signature&&(0,n.jsx)("div",{className:"float-end",children:(0,n.jsx)(x,{tooltip:"Verified Signer"})})]},e.party_id))]})})]})}),(0,n.jsx)(a.Z,{children:(0,n.jsxs)(a.Z.Body,{children:[(0,n.jsx)(a.Z.Title,{children:"Next Signers"}),0===s.next_signers.length?(0,n.jsx)("div",{children:"No Signers registered for next epoch"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{variant:"flush",children:[(0,n.jsx)(l.Z.Item,{children:(0,n.jsx)("b",{children:"Party id"})}),s.next_signers.map(e=>(0,n.jsxs)(l.Z.Item,{children:[e.party_id,e.verification_key_signature&&(0,n.jsx)("div",{className:"float-end",children:(0,n.jsx)(x,{tooltip:"Verified Signer"})})]},e.party_id))]})})]})})]})]})}var m=t(682),Z=t(4051),p=t(1555),f=t(478),v=t(7977),b=t(8710),_=t(5147);function N(e){let[s,t]=(0,r.useState)({}),i=(0,j.v9)(e=>e.settings.selectedAggregator);return(0,r.useEffect)(()=>{e.hash&&fetch("".concat(i,"/certificate/").concat(e.hash)).then(e=>200===e.status?e.json():{}).then(e=>t(e)).catch(e=>{t({}),console.error("Fetch certificate error:",e)})},[i,e.hash]),(0,n.jsxs)(b.Z,{show:void 0!==e.hash,onHide:function(){e.onHashChange(void 0)},size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,n.jsx)(b.Z.Header,{className:"text-break",closeButton:!0,children:(0,n.jsxs)(b.Z.Title,{id:"contained-modal-title-vcenter",children:["Certificate ",s.hash]})}),(0,n.jsx)(b.Z.Body,{children:0===Object.entries(s).length?(0,n.jsx)("p",{children:"Not found"}):(0,n.jsx)(m.Z,{children:(0,n.jsxs)(Z.Z,{md:1,xl:"auto",children:[(0,n.jsxs)(p.Z,{xl:4,children:[(0,n.jsx)("h4",{children:"Beacon"}),(0,n.jsxs)(l.Z,{className:"margin-bottom--md",variant:"flush",children:[(0,n.jsxs)(l.Z.Item,{children:["Network: ",s.beacon.network]}),(0,n.jsxs)(l.Z.Item,{children:["Epoch: ",s.beacon.epoch]}),(0,n.jsxs)(l.Z.Item,{children:["Immutable File Number: ",s.beacon.immutable_file_number]})]}),(0,n.jsx)("h4",{children:"Protocol Parameters"}),(0,n.jsx)(g,{protocolParameters:s.metadata.parameters})]}),(0,n.jsxs)(p.Z,{xl:8,children:[(0,n.jsx)("h4",{children:"Signers"}),""!==s.genesis_signature?(0,n.jsx)("div",{children:"This is the chain Genesis Certificate, since it&aops;s manually created it doesn't contain any Signers."}):0===s.metadata.signers.length?(0,n.jsx)("div",{children:"No Signers for this certificate, something went wrong either with the data retrieval or the signing process"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(_.Z,{responsive:!0,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Party id"}),(0,n.jsx)("th",{children:"Stake"})]})}),(0,n.jsx)("tbody",{children:s.metadata.signers.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.verification_key_signature&&(0,n.jsx)(x,{tooltip:"Verified Signer"})}),(0,n.jsx)("td",{children:e.party_id}),(0,n.jsx)("td",{children:e.stake})]},e.party_id))})]})})]})]})})}),(0,n.jsxs)(b.Z.Footer,{children:[""!==s.genesis_signature?(0,n.jsx)(v.Z,{bg:"warning",children:"Genesis"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.Z,{size:"sm",onClick:function(){e.onHashChange(s.previous_hash)},className:"text-break",children:["Previous hash: ",s.previous_hash]})}),(0,n.jsx)(d,{href:"".concat(i,"/certificate/").concat(e.hash),size:"sm"})]})]})}function y(e){let[s,t]=(0,r.useState)([]),[i,c]=(0,r.useState)(void 0),o=(0,j.v9)(e=>e.settings.selectedAggregator),x=(0,j.v9)(e=>e.settings.autoUpdate),g=(0,j.v9)(e=>e.settings.updateInterval);return(0,r.useEffect)(()=>{if(!x)return;let e=()=>{fetch("".concat(o,"/snapshots")).then(e=>e.json()).then(e=>t(e)).catch(e=>{t([]),console.error("Fetch snapshots error:",e)})};e();let s=setInterval(e,g);return()=>clearInterval(s)},[o,g,x]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{aggregator:o,hash:i,onHashChange:function(e){c(e)}}),(0,n.jsxs)("div",{className:e.className,children:[(0,n.jsxs)("h2",{children:["Snapshots ",(0,n.jsx)(d,{href:"".concat(o,"/snapshots"),variant:"outline-light",size:"sm"})]}),0===Object.entries(s).length?(0,n.jsx)("p",{children:"No snapshot available"}):(0,n.jsx)(m.Z,{fluid:!0,children:(0,n.jsx)(Z.Z,{xs:1,md:2,lg:3,xl:4,children:s.map((e,s)=>(0,n.jsx)(p.Z,{className:"mb-2",children:(0,n.jsxs)(a.Z,{border:0===s?"primary":"",children:[(0,n.jsxs)(a.Z.Body,{children:[(0,n.jsx)(a.Z.Title,{children:e.digest}),(0,n.jsxs)(l.Z,{variant:"flush",className:"data-list-group",children:[(0,n.jsxs)(l.Z.Item,{children:["Epoch: ",e.beacon.epoch]}),(0,n.jsxs)(l.Z.Item,{children:["Immutable File Number: ",e.beacon.immutable_file_number]}),(0,n.jsxs)(l.Z.Item,{children:["Certificate hash: ",(0,n.jsx)("br",{}),e.certificate_hash," ",(0,n.jsx)(h.Z,{size:"sm",onClick:()=>{c(e.certificate_hash)},children:"Show"})]}),(0,n.jsxs)(l.Z.Item,{children:["Created at: ",(0,n.jsx)("br",{})," ",new Date(e.created_at).toLocaleString()]}),(0,n.jsxs)(l.Z.Item,{children:["Size: ",function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(s<0?0:s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}(e.size)]})]})]}),(0,n.jsx)(a.Z.Footer,{children:(0,n.jsxs)(f.Z,{direction:"horizontal",gap:1,children:[0===s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{bg:"primary",children:"Latest"})," "]}),(0,n.jsx)(v.Z,{bg:"secondary",children:e.beacon.network}),(0,n.jsx)(d,{href:"".concat(o,"/snapshot/").concat(e.digest),size:"sm",className:"ms-auto"})]})})]})},e.digest))})})]})]})}var I=t(9008),k=t.n(I),w=t(5675),S=t.n(w),C=t(9695),F=t(7160),P=t.n(F),B=t(1604),E=t(6931),T=t(6986),z=t(1438);function H(e){let[s,t]=(0,r.useState)(""),[i,a]=(0,r.useState)(!1),l=(0,j.I0)();function c(){e.onAskClose(),a(!1),t("")}function o(e){e.preventDefault(),(0,z.checkUrl)(s)?(c(),l((0,E.VT)(s))):a(!0)}return(0,n.jsxs)(b.Z,{show:e.show,onHide:c,size:"lg","aria-labelledby":"add-aggregator-title",centered:!0,children:[(0,n.jsx)(b.Z.Header,{closeButton:!0,children:(0,n.jsx)(b.Z.Title,{id:"add-aggregator-title",children:"New aggregator source"})}),(0,n.jsx)(b.Z.Body,{children:(0,n.jsx)(C.Z,{onSubmit:o,children:(0,n.jsxs)(T.Z,{children:[(0,n.jsx)(C.Z.Label,{children:"URL"}),(0,n.jsx)(C.Z.Control,{type:"url",value:s,onChange:e=>t(e.target.value),isInvalid:i,autoFocus:!0}),(0,n.jsx)(C.Z.Control.Feedback,{type:"invalid",children:"Invalid URL"})]})})}),(0,n.jsxs)(b.Z.Footer,{children:[(0,n.jsx)(h.Z,{variant:"secondary",onClick:c,children:"Close"}),(0,n.jsx)(h.Z,{variant:"primary",onClick:o,children:"Save"})]})]})}function A(e){let[s,t]=(0,r.useState)(!1),i=(0,j.v9)(e=>e.settings.selectedAggregator),a=(0,j.v9)(e=>e.settings.availableAggregators),l=(0,j.v9)(e=>e.settings.canRemoveSelected),d=(0,j.I0)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H,{show:s,onAskClose:()=>t(!1)}),(0,n.jsxs)(C.Z.Group,{as:p.Z,className:e.className,children:[(0,n.jsx)(C.Z.Label,{children:"Aggregator:"}),(0,n.jsxs)(B.Z,{children:[(0,n.jsx)(h.Z,{variant:"outline-success",onClick:()=>t(!0),children:(0,n.jsx)("i",{className:"bi bi-plus-circle"})}),l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{variant:"outline-danger",onClick:()=>d((0,E.OR)()),children:(0,n.jsx)("i",{className:"bi bi-dash-circle"})}),(0,n.jsx)(c.Z,{overlay:(0,n.jsx)(o.Z,{children:"Unofficial Aggregator"}),children:(0,n.jsx)(h.Z,{variant:"outline-warning",children:(0,n.jsx)("i",{className:"bi bi-exclamation-triangle"})})})]}),(0,n.jsx)(C.Z.Select,{value:i,onChange:e=>d((0,E.VT)(e.target.value)),children:a.map((e,s)=>(0,n.jsx)("option",{value:e,children:e},"agg-"+s))}),(0,n.jsx)(c.Z,{overlay:(0,n.jsx)(o.Z,{children:"Copy url"}),children:(0,n.jsx)(h.Z,{variant:"outline-secondary",onClick:function(){window.isSecureContext&&i&&navigator.clipboard.writeText(i).then(()=>{})},children:(0,n.jsx)("i",{className:"bi bi-clipboard"})})})]})]})]})}var L=t(1163);function M(e){let[s,t]=(0,r.useState)({}),i=(0,j.v9)(e=>e.settings.selectedAggregator),c=(0,j.v9)(e=>e.settings.autoUpdate),o=(0,j.v9)(e=>e.settings.updateInterval);return(0,r.useEffect)(()=>{if(!c)return;let e=()=>{fetch("".concat(i,"/epoch-settings")).then(e=>200===e.status?e.json():{}).then(e=>t(e)).catch(e=>{t({}),console.error("Fetch epoch-settings error:",e)})};e();let s=setInterval(e,o);return()=>clearInterval(s)},[i,o,c]),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{children:["Epoch Settings",(0,n.jsx)(d,{href:"".concat(i,"/epoch-settings"),variant:"outline-light",size:"sm"})]}),(0,n.jsx)(a.Z,{children:(0,n.jsxs)(a.Z.Body,{children:[(0,n.jsx)(a.Z.Title,{children:"Current Epoch"}),(0,n.jsx)(l.Z,{variant:"flush",children:(0,n.jsx)(l.Z.Item,{children:s.epoch})}),(0,n.jsx)(a.Z.Title,{children:"Protocol Parameters"}),(0,n.jsx)(g,{protocolParameters:s.protocol}),(0,n.jsx)(a.Z.Title,{children:"Next Protocol Parameters"}),(0,n.jsx)(g,{protocolParameters:s.next_protocol})]})})]})}function O(e){let s=(0,j.v9)(e=>e.settings.autoUpdate),t=(0,j.v9)(e=>e.settings.updateInterval),r=(0,j.I0)();return(0,n.jsxs)(C.Z.Group,{as:p.Z,className:e.className,children:[(0,n.jsx)(C.Z.Label,{children:"Update Interval:"}),(0,n.jsxs)(B.Z,{children:[(0,n.jsx)(h.Z,{type:"button",onClick:()=>r((0,E.uI)()),variant:s?"primary":"success",children:s?"Pause ⏸":"Resume ▶"}),(0,n.jsxs)(C.Z.Select,{value:t,onChange:e=>r((0,E.JV)(e.target.value)),children:[(0,n.jsx)("option",{value:1e3,children:"1 seconds"}),(0,n.jsx)("option",{value:5e3,children:"5 seconds"}),(0,n.jsx)("option",{value:1e4,children:"10 seconds"})]})]})]})}function U(){let e=(0,L.useRouter)(),s=(0,j.v9)(e=>e.settings.selectedAggregator);return(0,r.useEffect)(()=>{e.push({query:{aggregator:s}}).then(()=>{})},[s]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(k(),{children:[(0,n.jsx)("title",{children:"Mithril Explorer"}),(0,n.jsx)("meta",{name:"description",content:"Explore a Mithril Network"}),(0,n.jsx)("link",{rel:"icon",href:"/explorer/favicon.ico"})]}),(0,n.jsx)("div",{className:P().container,children:(0,n.jsxs)("main",{className:P().main,children:[(0,n.jsx)("h1",{className:P().title,children:"Mithril Explorer"}),(0,n.jsxs)(f.Z,{gap:3,children:[(0,n.jsx)(C.Z,{children:(0,n.jsxs)(Z.Z,{xs:1,sm:2,children:[(0,n.jsx)(A,{}),(0,n.jsx)(O,{})]})}),(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(p.Z,{xs:12,sm:4,lg:3,xl:2,children:(0,n.jsx)(M,{})}),(0,n.jsx)(p.Z,{xs:12,sm:8,lg:9,xl:10,children:(0,n.jsx)(u,{})})]}),(0,n.jsx)(y,{})]})]})}),(0,n.jsxs)("footer",{className:P().footer,children:[(0,n.jsx)("span",{className:P().logo,children:(0,n.jsx)(S(),{src:"/explorer/logo.png",alt:"Mithril Logo",width:32,height:32})})," ",(0,n.jsx)("a",{href:"https://mithril.network/doc",children:"Go back to mithril documentation"})]})]})}},7160:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",code:"Home_code__suPER",logo:"Home_logo__27_tb"}}},function(e){e.O(0,[882,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);