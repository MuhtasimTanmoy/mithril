(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(4324)}])},4324:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return E}});var d=c(5893),e=c(7294),f=c(7337),g=c(7525),h=c(7366);function i(a){var b=(0,e.useState)({}),c=b[0],i=b[1];return(0,e.useEffect)(function(){if(a.autoUpdate){var b=function(){fetch("".concat(a.aggregator,"/certificate-pending")).then(function(a){return 200===a.status?a.json():{}}).then(function(a){return i(a)}).catch(function(a){i({}),console.error("Fetch certificate-pending error:",a)})};b();var c=setInterval(b,a.updateInterval);return function(){return clearInterval(c)}}},[a.aggregator,a.updateInterval,a.autoUpdate]),(0,d.jsxs)("div",{className:a.className,children:[(0,d.jsx)("h2",{children:"Pending Certificate"}),0===Object.entries(c).length?(0,d.jsx)("p",{children:"No pending certificate available"}):(0,d.jsxs)(f.Z,{children:[(0,d.jsx)(g.Z,{children:(0,d.jsxs)(g.Z.Body,{children:[(0,d.jsx)(g.Z.Title,{children:"Beacon"}),(0,d.jsxs)(h.Z,{className:"margin-bottom--md",variant:"flush",children:[(0,d.jsxs)(h.Z.Item,{children:["Network: ",c.beacon.network]}),(0,d.jsxs)(h.Z.Item,{children:["Epoch: ",c.beacon.epoch]}),(0,d.jsxs)(h.Z.Item,{children:["Immutable File Number: ",c.beacon.immutable_file_number]})]}),(0,d.jsx)(g.Z.Title,{children:"Protocol Parameters"}),(0,d.jsxs)(h.Z,{horizontal:!0,children:[(0,d.jsxs)(h.Z.Item,{children:["K: ",c.protocol.k]}),(0,d.jsxs)(h.Z.Item,{children:["M: ",c.protocol.m]}),(0,d.jsxs)(h.Z.Item,{children:["Phi: ",c.protocol.phi_f]})]})]})}),(0,d.jsx)(g.Z,{children:(0,d.jsxs)(g.Z.Body,{children:[(0,d.jsx)(g.Z.Title,{children:"Signers"}),0===c.signers.length?(0,d.jsx)("div",{children:"No Signers registered"}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(h.Z,{variant:"flush",children:[(0,d.jsx)(h.Z.Item,{children:(0,d.jsx)("b",{children:"Party id"})}),c.signers.map(function(a){return(0,d.jsx)(h.Z.Item,{children:a.party_id},a.party_id)})]})})]})}),(0,d.jsx)(g.Z,{children:(0,d.jsxs)(g.Z.Body,{children:[(0,d.jsx)(g.Z.Title,{children:"Next Signers"}),0===c.next_signers.length?(0,d.jsx)("div",{children:"No Signers registered for next epoch"}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(h.Z,{variant:"flush",children:[(0,d.jsx)(h.Z.Item,{children:(0,d.jsx)("b",{children:"Party id"})}),c.next_signers.map(function(a){return(0,d.jsx)(h.Z.Item,{children:a.party_id},a.party_id)})]})})]})})]})]})}var j=c(9976),k=c(682),l=c(1608),m=c(1555),n=c(5147),o=c(7977),p=c(5005);function q(a){var b=function(){a.onHashChange(g.previous_hash)},c=function(){a.onHashChange(void 0)},f=(0,e.useState)({}),g=f[0],i=f[1];return(0,e.useEffect)(function(){a.hash&&fetch("".concat(a.aggregator,"/certificate/").concat(a.hash)).then(function(a){return 200===a.status?a.json():{}}).then(function(a){return i(a)}).catch(function(a){i({}),console.error("Fetch certificate error:",a)})},[a.aggregator,a.hash]),(0,d.jsxs)(j.Z,{show:void 0!==a.hash,onHide:c,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,d.jsx)(j.Z.Header,{className:"text-break",closeButton:!0,children:(0,d.jsxs)(j.Z.Title,{id:"contained-modal-title-vcenter",children:["Certificate ",g.hash]})}),(0,d.jsx)(j.Z.Body,{children:0===Object.entries(g).length?(0,d.jsx)("p",{children:"Not found"}):(0,d.jsx)(k.Z,{children:(0,d.jsxs)(l.Z,{md:1,xl:"auto",children:[(0,d.jsxs)(m.Z,{xl:4,children:[(0,d.jsx)("h4",{children:"Beacon"}),(0,d.jsxs)(h.Z,{className:"margin-bottom--md",variant:"flush",children:[(0,d.jsxs)(h.Z.Item,{children:["Network: ",g.beacon.network]}),(0,d.jsxs)(h.Z.Item,{children:["Epoch: ",g.beacon.epoch]}),(0,d.jsxs)(h.Z.Item,{children:["Immutable File Number: ",g.beacon.immutable_file_number]})]}),(0,d.jsx)("h4",{children:"Protocol Parameters"}),(0,d.jsxs)(h.Z,{horizontal:!0,children:[(0,d.jsxs)(h.Z.Item,{children:["K: ",g.metadata.parameters.k]}),(0,d.jsxs)(h.Z.Item,{children:["M: ",g.metadata.parameters.m]}),(0,d.jsxs)(h.Z.Item,{children:["Phi: ",g.metadata.parameters.phi_f]})]})]}),(0,d.jsxs)(m.Z,{xl:8,children:[(0,d.jsx)("h4",{children:"Signers"}),0===g.metadata.signers.length?(0,d.jsx)("div",{children:"No Signers for this certificate, something went wrong either with the data retrieval or the signing process"}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(n.Z,{responsive:!0,children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Party id"}),(0,d.jsx)("th",{children:"Stake"})]})}),(0,d.jsx)("tbody",{children:g.metadata.signers.map(function(a){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:a.party_id}),(0,d.jsx)("td",{children:a.stake})]},a.party_id)})})]})})]})]})})}),(0,d.jsx)(j.Z.Footer,{children:""===g.previous_hash?(0,d.jsx)(o.Z,{bg:"warning",children:"Genesis"}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(p.Z,{size:"sm",onClick:b,className:"text-break",children:["Previous hash: ",g.previous_hash]})})})]})}function r(a){var b=function(a){s(a)},c=function(a){s(a)},f=(0,e.useState)([]),i=f[0],j=f[1],n=(0,e.useState)(void 0),r=n[0],s=n[1];return(0,e.useEffect)(function(){if(a.autoUpdate){var b=function(){fetch("".concat(a.aggregator,"/snapshots")).then(function(a){return a.json()}).then(function(a){return j(a)}).catch(function(a){j([]),console.error("Fetch snapshots error:",a)})};b();var c=setInterval(b,a.updateInterval);return function(){return clearInterval(c)}}},[a.aggregator,a.updateInterval,a.autoUpdate]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(q,{aggregator:a.aggregator,hash:r,onHashChange:b}),(0,d.jsxs)("div",{className:a.className,children:[(0,d.jsx)("h2",{children:"Snapshots"}),0===Object.entries(i).length?(0,d.jsx)("p",{children:"No snapshot available"}):(0,d.jsx)(k.Z,{fluid:!0,children:(0,d.jsx)(l.Z,{xs:1,md:2,lg:3,xl:4,children:i.map(function(a,b){return(0,d.jsx)(m.Z,{className:"mb-2",children:(0,d.jsxs)(g.Z,{border:0===b?"primary":"",children:[(0,d.jsxs)(g.Z.Body,{children:[(0,d.jsx)(g.Z.Title,{children:a.digest}),(0,d.jsxs)(h.Z,{variant:"flush",className:"data-list-group",children:[(0,d.jsxs)(h.Z.Item,{children:["Epoch: ",a.beacon.epoch]}),(0,d.jsxs)(h.Z.Item,{children:["Immutable File Number: ",a.beacon.immutable_file_number]}),(0,d.jsxs)(h.Z.Item,{children:["Certificate hash: ",(0,d.jsx)("br",{}),a.certificate_hash," ",(0,d.jsx)(p.Z,{size:"sm",onClick:function(){return c(a.certificate_hash)},children:"Show"})]}),(0,d.jsxs)(h.Z.Item,{children:["Created at: ",(0,d.jsx)("br",{})," ",new Date(a.created_at).toLocaleString()]}),(0,d.jsxs)(h.Z.Item,{children:["Size: ",function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:2;if(0===a)return"0 Bytes";var c=1024,d=b<0?0:b,e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],f=Math.floor(Math.log(a)/Math.log(c));return parseFloat((a/Math.pow(c,f)).toFixed(d))+" "+e[f]}(a.size)]})]})]}),(0,d.jsxs)(g.Z.Footer,{children:[0===b&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z,{bg:"primary",children:"Latest"})," "]}),(0,d.jsx)(o.Z,{bg:"secondary",children:a.beacon.network})]})]})},a.digest)})})})]})]})}var s=c(9008),t=c.n(s),u=c(5675),v=c.n(u),w=c(9301),x=c(1604),y=c(478),z=c(214),A=c.n(z),B=["https://aggregator.api.mithril.network/aggregator","http://localhost:8080/aggregator"];function C(a){var b=function(b){a.onIntervalChange(parseInt(b.target.value))},c=function(){a.onStartStopPress(!a.isStartStopPressed)};return(0,d.jsxs)(w.Z.Group,{as:m.Z,className:a.className,children:[(0,d.jsx)(w.Z.Label,{children:"Update Interval:"}),(0,d.jsxs)(x.Z,{children:[(0,d.jsx)(p.Z,{type:"button",onClick:c,variant:a.isStartStopPressed?"primary":"success",children:a.isStartStopPressed?"Pause ⏸":"Resume ▶"}),(0,d.jsxs)(w.Z.Select,{value:a.interval,onChange:b,children:[(0,d.jsx)("option",{value:1e3,children:"1 seconds"}),(0,d.jsx)("option",{value:5e3,children:"5 seconds"}),(0,d.jsx)("option",{value:1e4,children:"10 seconds"})]})]})]})}function D(a){var b=function(b){a.onAggregatorChange(b.target.value)};return(0,d.jsxs)(w.Z.Group,{as:m.Z,className:a.className,children:[(0,d.jsx)(w.Z.Label,{children:"Aggregator:"}),(0,d.jsx)(w.Z.Select,{value:a.aggregator,onChange:b,children:a.availableAggregators.map(function(a,b){return(0,d.jsx)("option",{value:a,children:a},"agg-"+b)})})]})}function E(){var a=function(a){h(a)},b=function(a){p(a)},c=function(a){m(a)},f=(0,e.useState)(B[0]),g=f[0],h=f[1],j=(0,e.useState)(1e4),k=j[0],m=j[1],n=(0,e.useState)(!0),o=n[0],p=n[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(t(),{children:[(0,d.jsx)("title",{children:"Mithril Explorer"}),(0,d.jsx)("meta",{name:"description",content:"Explore a Mithril Network"}),(0,d.jsx)("link",{rel:"icon",href:"/explorer/favicon.ico"})]}),(0,d.jsx)("div",{className:A().container,children:(0,d.jsxs)("main",{className:A().main,children:[(0,d.jsx)("h1",{className:A().title,children:"Mithril Explorer"}),(0,d.jsxs)(y.Z,{gap:3,children:[(0,d.jsx)(w.Z,{children:(0,d.jsxs)(l.Z,{xs:1,sm:2,children:[(0,d.jsx)(D,{aggregator:g,onAggregatorChange:a,availableAggregators:B}),(0,d.jsx)(C,{interval:k,onIntervalChange:c,isStartStopPressed:o,onStartStopPress:b})]})}),(0,d.jsx)(i,{aggregator:g,updateInterval:k,autoUpdate:o}),(0,d.jsx)(r,{aggregator:g,updateInterval:k,autoUpdate:o})]})]})}),(0,d.jsxs)("footer",{className:A().footer,children:[(0,d.jsx)("span",{className:A().logo,children:(0,d.jsx)(v(),{src:"/explorer/logo.png",alt:"Mithril Logo",width:32,height:32})})," ",(0,d.jsx)("a",{href:"https://mithril.network/doc",children:"Go back to mithril documentation"})]})]})}},214:function(a){a.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",code:"Home_code__suPER",logo:"Home_logo__27_tb"}}},function(a){a.O(0,[436,774,888,179],function(){var b;return a(a.s=5557)}),_N_E=a.O()}])