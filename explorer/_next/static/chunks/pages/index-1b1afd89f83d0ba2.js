(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(2832)}])},2832:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var i=s(5893),r=s(7294),n=s(1163),a=s(1649),l=s(9008),c=s.n(l),o=s(5675),h=s.n(o),d=s(1555),x=s(7832),j=s(4051),g=s(478),u=s(3192),m=s(5145),Z=s(9034),p=s.n(Z),f=s(5005),v=s(1604),b=s(3178),_=s(3489),y=s(8817),N=s(6986),k=s(7017),I=s(9144);function S(e){let[t,s]=(0,r.useState)(""),[n,l]=(0,r.useState)(!1),c=(0,a.I0)();function o(){e.onAskClose(),l(!1),s("")}function h(e){e.preventDefault(),(0,I.checkUrl)(t)?(o(),c((0,y.VT)(t))):l(!0)}return(0,i.jsxs)(k.Z,{show:e.show,onHide:o,size:"lg","aria-labelledby":"add-aggregator-title",centered:!0,children:[(0,i.jsx)(k.Z.Header,{closeButton:!0,children:(0,i.jsx)(k.Z.Title,{id:"add-aggregator-title",children:"New aggregator source"})}),(0,i.jsx)(k.Z.Body,{children:(0,i.jsx)(x.Z,{onSubmit:h,children:(0,i.jsxs)(N.Z,{children:[(0,i.jsx)(x.Z.Label,{children:"URL"}),(0,i.jsx)(x.Z.Control,{type:"url",value:t,onChange:e=>s(e.target.value),isInvalid:n,autoFocus:!0}),(0,i.jsx)(x.Z.Control.Feedback,{type:"invalid",children:"Invalid URL"})]})})}),(0,i.jsxs)(k.Z.Footer,{children:[(0,i.jsx)(f.Z,{variant:"secondary",onClick:o,children:"Close"}),(0,i.jsx)(f.Z,{variant:"primary",onClick:h,children:"Save"})]})]})}function C(e){let[t,s]=(0,r.useState)(!1),n=(0,a.v9)(e=>e.settings.selectedAggregator),l=(0,a.v9)(e=>e.settings.availableAggregators),c=(0,a.v9)(e=>e.settings.canRemoveSelected),o=(0,a.I0)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S,{show:t,onAskClose:()=>s(!1)}),(0,i.jsxs)(x.Z.Group,{as:d.Z,className:e.className,children:[(0,i.jsx)(x.Z.Label,{children:"Aggregator:"}),(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(f.Z,{variant:"outline-success",onClick:()=>s(!0),children:(0,i.jsx)("i",{className:"bi bi-plus-circle"})}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.Z,{variant:"outline-danger",onClick:()=>o((0,y.OR)()),children:(0,i.jsx)("i",{className:"bi bi-dash-circle"})}),(0,i.jsx)(b.Z,{overlay:(0,i.jsx)(_.Z,{children:"Unofficial Aggregator"}),children:(0,i.jsx)(f.Z,{variant:"outline-warning",children:(0,i.jsx)("i",{className:"bi bi-exclamation-triangle"})})})]}),(0,i.jsx)(x.Z.Select,{value:n,onChange:e=>o((0,y.VT)(e.target.value)),children:l.map((e,t)=>(0,i.jsx)("option",{value:e,children:e},"agg-"+t))}),(0,i.jsx)(b.Z,{overlay:(0,i.jsx)(_.Z,{children:"Copy url"}),children:(0,i.jsx)(f.Z,{variant:"outline-secondary",onClick:function(){window.isSecureContext&&n&&navigator.clipboard.writeText(n).then(()=>{})},children:(0,i.jsx)("i",{className:"bi bi-clipboard"})})})]})]})]})}var w=s(8182),F=s(8695);function E(e){return(0,i.jsx)(b.Z,{overlay:(0,i.jsx)(_.Z,{children:"Raw JSON"}),children:(0,i.jsx)(f.Z,{variant:"outline-secondary",target:"_blank",...e,children:(0,i.jsx)("i",{className:"bi bi-filetype-json",style:{color:"black"}})})})}function B(e){let{protocolParameters:t}=e;return(0,i.jsxs)(F.Z,{horizontal:!0,children:[(0,i.jsxs)(F.Z.Item,{children:["k: ",null==t?void 0:t.k]}),(0,i.jsxs)(F.Z.Item,{children:["m: ",null==t?void 0:t.m]}),(0,i.jsxs)(F.Z.Item,{children:["f: ",null==t?void 0:t.phi_f]})]})}function T(e){let[t,s]=(0,r.useState)({}),n=(0,a.v9)(e=>e.settings.selectedAggregator),l=(0,a.v9)(e=>e.settings.autoUpdate),c=(0,a.v9)(e=>e.settings.updateInterval);return(0,r.useEffect)(()=>{if(!l)return;let e=()=>{fetch("".concat(n,"/epoch-settings")).then(e=>200===e.status?e.json():{}).then(e=>s(e)).catch(e=>{s({}),console.error("Fetch epoch-settings error:",e)})};e();let t=setInterval(e,c);return()=>clearInterval(t)},[n,c,l]),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h2",{children:["Epoch Settings",(0,i.jsx)(E,{href:"".concat(n,"/epoch-settings"),variant:"outline-light",size:"sm"})]}),(0,i.jsx)(w.Z,{children:(0,i.jsxs)(w.Z.Body,{children:[(0,i.jsx)(w.Z.Title,{children:"Current Epoch"}),(0,i.jsx)(F.Z,{variant:"flush",children:(0,i.jsx)(F.Z.Item,{children:t.epoch})}),(0,i.jsx)(w.Z.Title,{children:"Protocol Parameters"}),(0,i.jsx)(B,{protocolParameters:t.protocol}),(0,i.jsx)(w.Z.Title,{children:"Next Protocol Parameters"}),(0,i.jsx)(B,{protocolParameters:t.next_protocol})]})})]})}function P(e){let t=(0,a.v9)(e=>e.settings.autoUpdate),s=(0,a.v9)(e=>e.settings.updateInterval),r=(0,a.I0)();return(0,i.jsxs)(x.Z.Group,{as:d.Z,className:e.className,children:[(0,i.jsx)(x.Z.Label,{children:"Update Interval:"}),(0,i.jsxs)(v.Z,{children:[(0,i.jsx)(f.Z,{type:"button",onClick:()=>r((0,y.uI)()),variant:t?"primary":"success",children:t?"Pause ⏸":"Resume ▶"}),(0,i.jsxs)(x.Z.Select,{value:s,onChange:e=>r((0,y.JV)(e.target.value)),children:[(0,i.jsx)("option",{value:1e3,children:"1 seconds"}),(0,i.jsx)("option",{value:5e3,children:"5 seconds"}),(0,i.jsx)("option",{value:1e4,children:"10 seconds"})]})]})]})}var z=s(7337);function H(e){let{signedEntityType:t}=e,[s,n]=(0,r.useState)(""),[a,l]=(0,r.useState)({});return(0,r.useEffect)(()=>{let e=Object.keys(t).at(0);if(n(e),"MithrilStakeDistribution"===e||"CardanoStakeDistribution"===e)l({epoch:t[e]});else{var s;l(null!==(s=t[e])&&void 0!==s?s:{})}},[t]),(0,i.jsxs)(F.Z,{children:[(0,i.jsx)(F.Z.Item,{children:(0,i.jsx)("h6",{children:s})}),(0,i.jsx)(F.Z.Item,{children:(0,i.jsx)(F.Z,{horizontal:"xxl",children:Object.entries(a).map(e=>{let[t,s]=e;return(0,i.jsxs)(F.Z.Item,{children:[t,": ",s]},t)})})})]})}function A(e){return(0,i.jsx)(b.Z,{overlay:(0,i.jsx)(_.Z,{children:e.tooltip}),children:(0,i.jsx)("a",{href:"#",className:"badge bg-success",children:(0,i.jsx)("i",{className:"bi bi-shield-lock"})})})}function M(e){let[t,s]=(0,r.useState)({}),n=(0,a.v9)(e=>e.settings.selectedAggregator),l=(0,a.v9)(e=>e.settings.autoUpdate),c=(0,a.v9)(e=>e.settings.updateInterval);return(0,r.useEffect)(()=>{if(!l)return;let e=()=>{fetch("".concat(n,"/certificate-pending")).then(e=>200===e.status?e.json():{}).then(e=>s(e)).catch(e=>{s({}),console.error("Fetch certificate-pending error:",e)})};e();let t=setInterval(e,c);return()=>clearInterval(t)},[n,c,l]),(0,i.jsxs)("div",{className:e.className,children:[(0,i.jsxs)("h2",{children:["Pending Certificate",0!==Object.entries(t).length&&(0,i.jsx)(E,{href:"".concat(n,"/certificate-pending"),variant:"outline-light",size:"sm"})]}),0===Object.entries(t).length?(0,i.jsx)("p",{children:"No pending certificate available"}):(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(w.Z,{children:(0,i.jsxs)(w.Z.Body,{children:[(0,i.jsx)(w.Z.Title,{children:"Beacon"}),(0,i.jsxs)(F.Z,{className:"margin-bottom--md",variant:"flush",children:[(0,i.jsxs)(F.Z.Item,{children:["Network: ",t.beacon.network]}),(0,i.jsxs)(F.Z.Item,{children:["Epoch: ",t.beacon.epoch]})]}),(0,i.jsx)(w.Z.Title,{children:"Entity Type"}),(0,i.jsx)(H,{signedEntityType:t.entity_type})]})}),(0,i.jsx)(w.Z,{children:(0,i.jsxs)(w.Z.Body,{children:[(0,i.jsx)(w.Z.Title,{children:"Signers"}),0===t.signers.length?(0,i.jsx)("div",{children:"No Signers registered"}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(F.Z,{variant:"flush",children:[(0,i.jsx)(F.Z.Item,{children:(0,i.jsx)("b",{children:"Party id"})}),t.signers.map(e=>(0,i.jsxs)(F.Z.Item,{children:[e.party_id,e.verification_key_signature&&(0,i.jsx)("div",{className:"float-end",children:(0,i.jsx)(A,{tooltip:"Verified Signer"})})]},e.party_id))]})})]})}),(0,i.jsx)(w.Z,{children:(0,i.jsxs)(w.Z.Body,{children:[(0,i.jsx)(w.Z.Title,{children:"Next Signers"}),0===t.next_signers.length?(0,i.jsx)("div",{children:"No Signers registered for next epoch"}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(F.Z,{variant:"flush",children:[(0,i.jsx)(F.Z.Item,{children:(0,i.jsx)("b",{children:"Party id"})}),t.next_signers.map(e=>(0,i.jsxs)(F.Z.Item,{children:[e.party_id,e.verification_key_signature&&(0,i.jsx)("div",{className:"float-end",children:(0,i.jsx)(A,{tooltip:"Verified Signer"})})]},e.party_id))]})})]})})]})]})}var L=s(7977),O=s(682),D=s(5147);function U(e){let[t,s]=(0,r.useState)({}),n=(0,a.v9)(e=>e.settings.selectedAggregator);return(0,r.useEffect)(()=>{e.hash&&fetch("".concat(n,"/certificate/").concat(e.hash)).then(e=>200===e.status?e.json():{}).then(e=>s(e)).catch(e=>{s({}),console.error("Fetch certificate error:",e)})},[n,e.hash]),(0,i.jsxs)(k.Z,{show:void 0!==e.hash,onHide:function(){e.onHashChange(void 0)},size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,i.jsx)(k.Z.Header,{className:"text-break",closeButton:!0,children:(0,i.jsxs)(k.Z.Title,{id:"contained-modal-title-vcenter",children:["Certificate ",t.hash]})}),(0,i.jsx)(k.Z.Body,{children:0===Object.entries(t).length?(0,i.jsx)("p",{children:"Not found"}):(0,i.jsx)(O.Z,{children:(0,i.jsxs)(j.Z,{md:1,xl:"auto",children:[(0,i.jsxs)(d.Z,{xl:4,children:[(0,i.jsx)("h4",{children:"Beacon"}),(0,i.jsxs)(F.Z,{className:"margin-bottom--md",variant:"flush",children:[(0,i.jsxs)(F.Z.Item,{children:["Network: ",t.beacon.network]}),(0,i.jsxs)(F.Z.Item,{children:["Epoch: ",t.beacon.epoch]}),(0,i.jsxs)(F.Z.Item,{children:["Immutable File Number: ",t.beacon.immutable_file_number]})]}),(0,i.jsx)("h4",{children:"Protocol Parameters"}),(0,i.jsx)(B,{protocolParameters:t.metadata.parameters})]}),(0,i.jsxs)(d.Z,{xl:8,children:[(0,i.jsx)("h4",{children:"Signers"}),""!==t.genesis_signature?(0,i.jsx)("div",{children:"This is the chain Genesis Certificate, since it's manually created it doesn't contain any Signers."}):0===t.metadata.signers.length?(0,i.jsx)("div",{children:"No Signers for this certificate, something went wrong either with the data retrieval or the signing process"}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(D.Z,{responsive:!0,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{}),(0,i.jsx)("th",{children:"Party id"}),(0,i.jsx)("th",{children:"Stake"})]})}),(0,i.jsx)("tbody",{children:t.metadata.signers.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.verification_key_signature&&(0,i.jsx)(A,{tooltip:"Verified Signer"})}),(0,i.jsx)("td",{children:e.party_id}),(0,i.jsx)("td",{children:e.stake})]},e.party_id))})]})})]})]})})}),(0,i.jsxs)(k.Z.Footer,{children:[""!==t.genesis_signature?(0,i.jsx)(L.Z,{bg:"warning",children:"Genesis"}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(f.Z,{size:"sm",onClick:function(){e.onHashChange(t.previous_hash)},className:"text-break",children:["Previous hash: ",t.previous_hash]})}),(0,i.jsx)(E,{href:"".concat(n,"/certificate/").concat(e.hash),size:"sm"})]})]})}function R(e){let[t,s]=(0,r.useState)([]),[n,l]=(0,r.useState)(void 0),c=(0,a.v9)(e=>e.settings.selectedAggregator),o=(0,a.v9)(e=>e.settings.autoUpdate),h=(0,a.v9)(e=>e.settings.updateInterval);return(0,r.useEffect)(()=>{if(!o)return;let e=()=>{fetch("".concat(c,"/snapshots")).then(e=>e.json()).then(e=>s(e)).catch(e=>{s([]),console.error("Fetch snapshots error:",e)})};e();let t=setInterval(e,h);return()=>clearInterval(t)},[c,h,o]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U,{aggregator:c,hash:n,onHashChange:function(e){l(e)}}),(0,i.jsxs)("div",{className:e.className,children:[(0,i.jsxs)("h2",{children:["Snapshots ",(0,i.jsx)(E,{href:"".concat(c,"/snapshots"),variant:"outline-light",size:"sm"})]}),0===Object.entries(t).length?(0,i.jsx)("p",{children:"No snapshot available"}):(0,i.jsx)(O.Z,{fluid:!0,children:(0,i.jsx)(j.Z,{xs:1,md:2,lg:3,xl:4,children:t.map((e,t)=>(0,i.jsx)(d.Z,{className:"mb-2",children:(0,i.jsxs)(w.Z,{border:0===t?"primary":"",children:[(0,i.jsxs)(w.Z.Body,{children:[(0,i.jsx)(w.Z.Title,{children:e.digest}),(0,i.jsxs)(F.Z,{variant:"flush",className:"data-list-group",children:[(0,i.jsxs)(F.Z.Item,{children:["Epoch: ",e.beacon.epoch]}),(0,i.jsxs)(F.Z.Item,{children:["Immutable File Number: ",e.beacon.immutable_file_number]}),(0,i.jsxs)(F.Z.Item,{children:["Certificate hash: ",(0,i.jsx)("br",{}),e.certificate_hash," ",(0,i.jsx)(f.Z,{size:"sm",onClick:()=>{l(e.certificate_hash)},children:"Show"})]}),(0,i.jsxs)(F.Z.Item,{children:["Created at: ",(0,i.jsx)("br",{})," ",new Date(e.created_at).toLocaleString()]}),(0,i.jsxs)(F.Z.Item,{children:["Size: ",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let s=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}(e.size)]})]})]}),(0,i.jsx)(w.Z.Footer,{children:(0,i.jsxs)(g.Z,{direction:"horizontal",gap:1,children:[0===t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.Z,{bg:"primary",children:"Latest"})," "]}),(0,i.jsx)(L.Z,{bg:"secondary",children:e.beacon.network}),(0,i.jsx)(E,{href:"".concat(c,"/snapshot/").concat(e.digest),size:"sm",className:"ms-auto"})]})})]})},e.digest))})})]})]})}function G(e){let[t,s]=(0,r.useState)([]),[n,l]=(0,r.useState)(void 0),c=(0,a.v9)(e=>e.settings.selectedAggregator),o=(0,a.v9)(e=>e.settings.autoUpdate),h=(0,a.v9)(e=>e.settings.updateInterval);return(0,r.useEffect)(()=>{if(!o)return;let e=()=>{fetch("".concat(c,"/artifact/mithril-stake-distributions")).then(e=>e.json()).then(e=>s(e)).catch(e=>{s([]),console.error("Fetch mithrilStakeDistributions error:",e)})};e();let t=setInterval(e,h);return()=>clearInterval(t)},[c,h,o]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U,{aggregator:c,hash:n,onHashChange:function(e){l(e)}}),(0,i.jsxs)("div",{className:e.className,children:[(0,i.jsxs)("h2",{children:["Mithril Stake Distribution ",(0,i.jsx)(E,{href:"".concat(c,"/artifact/mithril-stake-distributions"),variant:"outline-light",size:"sm"})]}),0===Object.entries(t).length?(0,i.jsx)("p",{children:"No mithril stake distribution available"}):(0,i.jsx)(O.Z,{fluid:!0,children:(0,i.jsx)(j.Z,{xs:1,md:2,lg:3,xl:4,children:t.map((e,t)=>(0,i.jsx)(d.Z,{className:"mb-2",children:(0,i.jsxs)(w.Z,{border:0===t?"primary":"",children:[(0,i.jsxs)(w.Z.Body,{children:[(0,i.jsx)(w.Z.Title,{children:e.hash}),(0,i.jsxs)(F.Z,{variant:"flush",className:"data-list-group",children:[(0,i.jsxs)(F.Z.Item,{children:["Epoch: ",e.epoch]}),e.created_at&&(0,i.jsxs)(F.Z.Item,{children:["Created: ",new Date(e.created_at).toLocaleString()]}),(0,i.jsxs)(F.Z.Item,{children:["Certificate hash: ",(0,i.jsx)("br",{}),e.certificate_hash," ",(0,i.jsx)(f.Z,{size:"sm",onClick:()=>{l(e.certificate_hash)},children:"Show"})]})]})]}),(0,i.jsx)(w.Z.Footer,{children:(0,i.jsxs)(g.Z,{direction:"horizontal",gap:1,children:[0===t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.Z,{bg:"primary",children:"Latest"})," "]}),(0,i.jsx)(E,{href:"".concat(c,"/artifact/mithril-stake-distribution/").concat(e.hash),size:"sm",className:"ms-auto"})]})})]})},e.hash))})})]})]})}function V(){let e=(0,n.useRouter)(),t=(0,a.v9)(e=>e.settings.selectedAggregator);return(0,r.useEffect)(()=>{e.push({query:{aggregator:t}}).then(()=>{})},[t]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c(),{children:[(0,i.jsx)("title",{children:"Mithril Explorer"}),(0,i.jsx)("meta",{name:"description",content:"Explore a Mithril Network"}),(0,i.jsx)("link",{rel:"icon",href:"/explorer/logo.svg?v=1",type:"image/svg+xml"})]}),(0,i.jsx)("div",{className:p().container,children:(0,i.jsxs)("main",{className:p().main,children:[(0,i.jsxs)("h1",{className:p().title,children:[(0,i.jsx)(h(),{src:"/explorer/logo.png",alt:"Mithril Logo",width:55,height:55})," Mithril Explorer"]}),(0,i.jsxs)(g.Z,{gap:3,children:[(0,i.jsx)(x.Z,{children:(0,i.jsxs)(j.Z,{xs:1,sm:2,children:[(0,i.jsx)(C,{}),(0,i.jsx)(P,{})]})}),(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(d.Z,{xs:12,sm:4,lg:3,xl:2,children:(0,i.jsx)(T,{})}),(0,i.jsx)(d.Z,{xs:12,sm:8,lg:9,xl:10,children:(0,i.jsx)(M,{})})]}),(0,i.jsxs)(m.Z,{defaultActiveKey:"snapshots",children:[(0,i.jsx)(u.Z,{title:"Snapshots",eventKey:"snapshots",children:(0,i.jsx)(R,{})}),(0,i.jsx)(u.Z,{title:"Mithril Stake Distribution",eventKey:"mithrilStakeDistribution",children:(0,i.jsx)(G,{})})]})]})]})}),(0,i.jsxs)("footer",{className:p().footer,children:[(0,i.jsx)("span",{className:p().logo,children:(0,i.jsx)(h(),{src:"/explorer/logo.png",alt:"Mithril Logo",width:32,height:32})})," ",(0,i.jsx)("a",{href:"https://mithril.network/doc",children:"Go back to mithril documentation"})]})]})}},9034:function(e){e.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",code:"Home_code__suPER",logo:"Home_logo__27_tb"}}},function(e){e.O(0,[598,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);