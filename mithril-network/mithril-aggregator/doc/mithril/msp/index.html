<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Base multisignature scheme, used as a primitive for STM. See Section 2.4 of the paper."><meta name="keywords" content="rust, rustlang, rust-lang, msp"><title>mithril::msp - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../mithril/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Module msp</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li></ul></div><div id="sidebar-vars" data-name="msp" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../mithril/index.html"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">mithril</a>::<wbr><a class="mod" href="#">msp</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/mithril/msp.rs.html#1-448" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Base multisignature scheme, used as a primitive for STM.
See Section 2.4 of <a href="https://eprint.iacr.org/2021/916">the paper</a>.</p>
<p>The following is an example showing how to use Msp with the BLS12 curve.
It creates 10 signatures of the same (arbitrary) message, then shows how to combine
those signatures into an aggregate signature.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>    <span class="kw">use</span> <span class="ident">mithril::msp::Msp</span>; <span class="comment">// Import the Msp module</span>
    <span class="kw">use</span> <span class="ident">rand_chacha::rand_core</span>::{<span class="ident">RngCore</span>, <span class="ident">SeedableRng</span>}; <span class="comment">// For RNG functionality</span>
    <span class="kw">use</span> <span class="ident">ark_bls12_377::Bls12_377</span>; <span class="comment">// Underlying curve using Ark</span>

    <span class="comment">// We will create and aggregate 10 signatures in this example</span>
    <span class="kw">let</span> <span class="ident">num_sigs</span> <span class="op">=</span> <span class="number">10</span>;

    <span class="comment">// create and initialize the RNG</span>
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rng</span> <span class="op">=</span> <span class="ident">rand_chacha::ChaCha8Rng::seed_from_u64</span>(<span class="number">42</span>);

    <span class="comment">// The message will just be some arbitrary data</span>
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">msg</span> <span class="op">=</span> [<span class="number">0</span>; <span class="number">16</span>];
    <span class="ident">rng</span>.<span class="ident">fill_bytes</span>(<span class="kw-2">&amp;mut</span> <span class="ident">msg</span>);

    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">mvks</span> <span class="op">=</span> <span class="ident">Vec::new</span>(); <span class="comment">// vec of verification keys</span>
    <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">sigs</span> <span class="op">=</span> <span class="ident">Vec::new</span>(); <span class="comment">// vec of signatures</span>

    <span class="kw">for</span> <span class="kw">_</span> <span class="kw">in</span> <span class="number">0</span>..<span class="ident">num_sigs</span> {
        <span class="comment">// Create a new keypair using the BLS12_377 curve</span>
        <span class="kw">let</span> (<span class="ident">sk</span>, <span class="ident">pk</span>) <span class="op">=</span> <span class="ident">Msp</span>::<span class="op">&lt;</span><span class="ident">Bls12_377</span><span class="op">&gt;</span><span class="ident">::gen</span>(<span class="kw-2">&amp;mut</span> <span class="ident">rng</span>);
        <span class="comment">// Sign the message using an individual secret key</span>
        <span class="kw">let</span> <span class="ident">sig</span> <span class="op">=</span> <span class="ident">Msp::sig</span>(<span class="kw-2">&amp;</span><span class="ident">sk</span>, <span class="kw-2">&amp;</span><span class="ident">msg</span>);
        <span class="comment">// Check that the individual verification is valid</span>
        <span class="macro">assert!</span>(<span class="ident">Msp::ver</span>(<span class="kw-2">&amp;</span><span class="ident">msg</span>, <span class="kw-2">&amp;</span><span class="ident">pk</span>.<span class="ident">mvk</span>, <span class="kw-2">&amp;</span><span class="ident">sig</span>));
        <span class="ident">sigs</span>.<span class="ident">push</span>(<span class="ident">sig</span>);
        <span class="ident">mvks</span>.<span class="ident">push</span>(<span class="ident">pk</span>.<span class="ident">mvk</span>);
    }

    <span class="comment">// Aggregate the verification keys</span>
    <span class="kw">let</span> <span class="ident">ivk</span> <span class="op">=</span> <span class="ident">Msp::aggregate_keys</span>(<span class="kw-2">&amp;</span><span class="ident">mvks</span>);
    <span class="comment">// Aggregate the signatures keys</span>
    <span class="kw">let</span> <span class="ident">mu</span> <span class="op">=</span> <span class="ident">Msp::aggregate_sigs</span>(<span class="kw-2">&amp;</span><span class="ident">sigs</span>);
    <span class="comment">// Check that the aggregated signature is valid</span>
    <span class="macro">assert!</span>(<span class="ident">Msp::aggregate_ver</span>(<span class="kw-2">&amp;</span><span class="ident">msg</span>, <span class="kw-2">&amp;</span><span class="ident">ivk</span>, <span class="kw-2">&amp;</span><span class="ident">mu</span>));</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Msp.html" title="mithril::msp::Msp struct">Msp</a></div><div class="item-right docblock-short"><p>Struct used to namespace the functions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MspMvk.html" title="mithril::msp::MspMvk struct">MspMvk</a></div><div class="item-right docblock-short"><p>MSP verification key.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MspPk.html" title="mithril::msp::MspPk struct">MspPk</a></div><div class="item-right docblock-short"><p>MSP public key, contains the verification key and proof of posession.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MspSig.html" title="mithril::msp::MspSig struct">MspSig</a></div><div class="item-right docblock-short"><p>MSP signature.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.MspSk.html" title="mithril::msp::MspSk struct">MspSk</a></div><div class="item-right docblock-short"><p>MSP secret key.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="mithril" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>